<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="theme-color" content="#ff9800">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Sarah IA - Design AI Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/compressorjs@1.0.9/dist/compressor.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        * {
            font-family: 'Poppins', sans-serif;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%);
        }
        
        .navbar-gradient {
            background: linear-gradient(90deg, #ff9800 0%, #ff5722 100%);
            box-shadow: 0 4px 20px rgba(255, 87, 34, 0.3);
        }
        
        @keyframes slideUp {
            from {
                transform: translateY(20px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
        
        .slide-up {
            animation: slideUp 0.5s ease-out;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @keyframes progress {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        .design-card {
            transition: all 0.3s ease;
            border: 2px solid transparent;
            background: linear-gradient(white, white) padding-box,
                        linear-gradient(135deg, #ff9800, #ff5722) border-box;
        }
        
        .design-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(255, 152, 0, 0.2);
        }
        
        .quality-improvement-card {
            transition: all 0.3s ease;
            border: 2px solid transparent;
            background: linear-gradient(white, white) padding-box,
                        linear-gradient(135deg, #667eea 0%, #764ba2 100%) border-box;
        }
        
        .quality-improvement-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(102, 126, 234, 0.2);
        }
        
        .remove-bg-card {
            transition: all 0.3s ease;
            border: 2px solid transparent;
            background: linear-gradient(white, white) padding-box,
                        linear-gradient(135deg, #10b981 0%, #059669 100%) border-box;
        }
        
        .remove-bg-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(16, 185, 129, 0.2);
        }
        
        .video-compression-card {
            transition: all 0.3s ease;
            border: 2px solid transparent;
            background: linear-gradient(white, white) padding-box,
                        linear-gradient(135deg, #8B5CF6 0%, #7C3AED 100%) border-box;
        }
        
        .video-compression-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(139, 92, 246, 0.2);
        }
        
        .file-compression-card {
            transition: all 0.3s ease;
            border: 2px solid transparent;
            background: linear-gradient(white, white) padding-box,
                        linear-gradient(135deg, #F59E0B 0%, #D97706 100%) border-box;
        }
        
        .file-compression-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(245, 158, 11, 0.2);
        }
        
        .drop-zone {
            border: 3px dashed #ff9800;
            background: rgba(255, 152, 0, 0.05);
            transition: all 0.3s ease;
        }
        
        .drop-zone.drag-over {
            background: rgba(255, 152, 0, 0.1);
            border-color: #ff5722;
            transform: scale(1.02);
        }
        
        .quality-dropzone {
            border: 3px dashed #667eea;
            background: rgba(102, 126, 234, 0.05);
            border-radius: 12px;
            padding: 40px 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .quality-dropzone.drag-over {
            background: rgba(102, 126, 234, 0.1);
            border-color: #764ba2;
            transform: scale(1.02);
        }
        
        .remove-bg-dropzone {
            border: 3px dashed #10b981;
            background: rgba(16, 185, 129, 0.05);
            border-radius: 12px;
            padding: 40px 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .remove-bg-dropzone.drag-over {
            background: rgba(16, 185, 129, 0.1);
            border-color: #059669;
            transform: scale(1.02);
        }
        
        .video-dropzone {
            border: 3px dashed #8B5CF6;
            background: rgba(139, 92, 246, 0.05);
            border-radius: 12px;
            padding: 40px 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .video-dropzone.drag-over {
            background: rgba(139, 92, 246, 0.1);
            border-color: #7C3AED;
            transform: scale(1.02);
        }
        
        .file-dropzone {
            border: 3px dashed #F59E0B;
            background: rgba(245, 158, 11, 0.05);
            border-radius: 12px;
            padding: 40px 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .file-dropzone.drag-over {
            background: rgba(245, 158, 11, 0.1);
            border-color: #D97706;
            transform: scale(1.02);
        }
        
        .image-preview-container {
            background: linear-gradient(45deg, #f0f0f0 25%, #e0e0e0 25%, #e0e0e0 50%, #f0f0f0 50%, #f0f0f0 75%, #e0e0e0 75%, #e0e0e0);
            background-size: 20px 20px;
        }
        
        .video-preview-container {
            background: #000;
            border-radius: 8px;
            overflow: hidden;
        }
        
        .preview-image {
            max-width: 100%;
            max-height: 200px;
            border-radius: 8px;
            object-fit: contain;
        }
        
        .preview-video {
            max-width: 100%;
            max-height: 200px;
            border-radius: 8px;
            object-fit: contain;
        }
        
        .compression-slider {
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: linear-gradient(90deg, #ff5722 0%, #ff9800 100%);
            outline: none;
        }
        
        .compression-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: white;
            border: 3px solid #ff5722;
            cursor: pointer;
            box-shadow: 0 0 10px rgba(255, 87, 34, 0.5);
            transition: all 0.2s ease;
        }
        
        .compression-slider::-webkit-slider-thumb:hover {
            transform: scale(1.1);
            box-shadow: 0 0 15px rgba(255, 87, 34, 0.7);
        }
        
        .quality-slider {
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            outline: none;
        }
        
        .quality-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: white;
            border: 3px solid #667eea;
            cursor: pointer;
            box-shadow: 0 0 10px rgba(102, 126, 234, 0.5);
            transition: all 0.2s ease;
        }
        
        .quality-slider::-webkit-slider-thumb:hover {
            transform: scale(1.1);
            box-shadow: 0 0 15px rgba(102, 126, 234, 0.7);
        }
        
        .video-slider {
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: linear-gradient(90deg, #8B5CF6 0%, #7C3AED 100%);
            outline: none;
        }
        
        .video-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: white;
            border: 3px solid #8B5CF6;
            cursor: pointer;
            box-shadow: 0 0 10px rgba(139, 92, 246, 0.5);
            transition: all 0.2s ease;
        }
        
        .video-slider::-webkit-slider-thumb:hover {
            transform: scale(1.1);
            box-shadow: 0 0 15px rgba(139, 92, 246, 0.7);
        }
        
        .file-slider {
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: linear-gradient(90deg, #F59E0B 0%, #D97706 100%);
            outline: none;
        }
        
        .file-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: white;
            border: 3px solid #F59E0B;
            cursor: pointer;
            box-shadow: 0 0 10px rgba(245, 158, 11, 0.5);
            transition: all 0.2s ease;
        }
        
        .file-slider::-webkit-slider-thumb:hover {
            transform: scale(1.1);
            box-shadow: 0 0 15px rgba(245, 158, 11, 0.7);
        }
        
        .loader {
            border: 4px solid rgba(255, 152, 0, 0.2);
            border-top: 4px solid #ff9800;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        
        .video-loader {
            border: 4px solid rgba(139, 92, 246, 0.2);
            border-top: 4px solid #8B5CF6;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        
        .file-loader {
            border: 4px solid rgba(245, 158, 11, 0.2);
            border-top: 4px solid #F59E0B;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        
        .result-badge {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
            animation: pulse 2s infinite;
        }
        
        .video-result-badge {
            background: linear-gradient(135deg, #8B5CF6 0%, #7C3AED 100%);
            color: white;
            animation: pulse 2s infinite;
        }
        
        .file-result-badge {
            background: linear-gradient(135deg, #F59E0B 0%, #D97706 100%);
            color: white;
            animation: pulse 2s infinite;
        }
        
        .feature-badge {
            background: linear-gradient(135deg, #ff9800 0%, #ff5722 100%);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            display: inline-block;
            margin-left: 8px;
        }
        
        .new-badge {
            background: linear-gradient(135deg, #10B981 0%, #059669 100%);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            display: inline-block;
            margin-left: 8px;
        }
        
        .pro-badge {
            background: linear-gradient(135deg, #8B5CF6 0%, #7C3AED 100%);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            display: inline-block;
            margin-left: 8px;
        }
        
        .large-file-badge {
            background: linear-gradient(135deg, #F59E0B 0%, #D97706 100%);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            display: inline-block;
            margin-left: 8px;
        }
        
        .btn-hover-effect {
            transition: all 0.3s ease;
        }
        
        .btn-hover-effect:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .hero-section {
            position: relative;
            overflow: hidden;
            border-radius: 20px;
            margin-bottom: 2rem;
        }
        
        .hero-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(255, 152, 0, 0.9) 0%, rgba(255, 87, 34, 0.9) 100%);
            z-index: 1;
        }
        
        .hero-content {
            position: relative;
            z-index: 2;
            color: white;
        }
        
        .sarah-hero {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            object-fit: cover;
            border: 5px solid white;
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.3);
            margin: 0 auto;
        }
        
        .compression-btn {
            background: linear-gradient(135deg, #3B82F6 0%, #1D4ED8 100%);
            color: white;
            transition: all 0.3s ease;
        }
        
        .compression-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(59, 130, 246, 0.3);
        }
        
        .compression-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .quality-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .quality-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }
        
        .quality-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .remove-bg-btn {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .remove-bg-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(16, 185, 129, 0.3);
        }
        
        .remove-bg-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .video-btn {
            background: linear-gradient(135deg, #8B5CF6 0%, #7C3AED 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .video-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(139, 92, 246, 0.3);
        }
        
        .video-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .file-btn {
            background: linear-gradient(135deg, #F59E0B 0%, #D97706 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .file-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(245, 158, 11, 0.3);
        }
        
        .file-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .download-btn {
            background: linear-gradient(135deg, #3B82F6 0%, #1D4ED8 100%);
            color: white;
            transition: all 0.3s ease;
        }
        
        .download-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(59, 130, 246, 0.3);
        }
        
        .quality-option {
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .quality-option:hover {
            border-color: #667eea;
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.1);
        }
        
        .quality-option.active {
            border-color: #667eea;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .quality-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 15px;
            font-size: 24px;
        }
        
        .quality-option.active .quality-icon {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .enhancement-options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 15px;
        }
        
        .enhancement-option {
            padding: 10px;
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }
        
        .enhancement-option:hover {
            border-color: #667eea;
            background: #e0f2fe;
        }
        
        .enhancement-option.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: #667eea;
        }
        
        .bg-removal-options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 15px;
        }
        
        .bg-removal-option {
            padding: 15px;
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }
        
        .bg-removal-option:hover {
            border-color: #10b981;
            background: #e0f2fe;
        }
        
        .bg-removal-option.active {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            border-color: #10b981;
        }
        
        .video-options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 15px;
        }
        
        .video-option {
            padding: 15px;
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }
        
        .video-option:hover {
            border-color: #8B5CF6;
            background: #e0f2fe;
        }
        
        .video-option.active {
            background: linear-gradient(135deg, #8B5CF6 0%, #7C3AED 100%);
            color: white;
            border-color: #8B5CF6;
        }
        
        .file-options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 15px;
        }
        
        .file-option {
            padding: 15px;
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }
        
        .file-option:hover {
            border-color: #F59E0B;
            background: #e0f2fe;
        }
        
        .file-option.active {
            background: linear-gradient(135deg, #F59E0B 0%, #D97706 100%);
            color: white;
            border-color: #F59E0B;
        }
        
        .api-status {
            padding: 8px;
            border-radius: 8px;
            font-size: 0.8rem;
            text-align: center;
            margin-top: 10px;
            transition: all 0.3s ease;
        }
        
        .api-status.connected {
            background-color: #d1fae5;
            color: #065f46;
            border: 1px solid #34d399;
        }
        
        .api-status.error {
            background-color: #fee2e2;
            color: #991b1b;
            border: 1px solid #f87171;
        }
        
        .api-status.loading {
            background-color: #fef3c7;
            color: #92400e;
            border: 1px solid #fbbf24;
        }
        
        .api-status.warning {
            background-color: #fef3c7;
            color: #92400e;
            border: 1px solid #fbbf24;
        }
        
        .progress-bar-container {
            width: 100%;
            height: 6px;
            background-color: #e5e7eb;
            border-radius: 3px;
            overflow: hidden;
            margin-top: 8px;
        }
        
        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            border-radius: 3px;
            transition: width 0.3s ease;
        }
        
        .remove-bg-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #10b981 0%, #059669 100%);
            border-radius: 3px;
            transition: width 0.3s ease;
        }
        
        .video-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #8B5CF6 0%, #7C3AED 100%);
            border-radius: 3px;
            transition: width 0.3s ease;
        }
        
        .file-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #F59E0B 0%, #D97706 100%);
            border-radius: 3px;
            transition: width 0.3s ease;
        }
        
        .video-progress-bar-large {
            height: 100%;
            background: linear-gradient(90deg, #8B5CF6, #7C3AED, #8B5CF6);
            background-size: 200% 100%;
            border-radius: 3px;
            transition: width 0.3s ease;
            animation: progress 2s ease infinite;
        }
        
        .stats-card {
            background: #f8fafc;
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            border: 1px solid #e2e8f0;
        }
        
        .stats-value {
            font-size: 1.5rem;
            font-weight: bold;
            margin-top: 5px;
        }
        
        .stats-label {
            font-size: 0.875rem;
            color: #6b7280;
        }
        
        .comparison-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }
        
        .comparison-item {
            text-align: center;
        }
        
        .comparison-label {
            font-weight: 600;
            margin-top: 10px;
            color: #374151;
        }
        
        .comparison-value {
            font-size: 0.875rem;
            color: #6b7280;
        }
        
        .video-quality-option {
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .video-quality-option:hover {
            border-color: #8B5CF6;
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(139, 92, 246, 0.1);
        }
        
        .video-quality-option.active {
            border-color: #8B5CF6;
            background: linear-gradient(135deg, #8B5CF6 0%, #7C3AED 100%);
            color: white;
        }
        
        .video-quality-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 10px;
            font-size: 20px;
        }
        
        .video-quality-option.active .video-quality-icon {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .resolution-option {
            padding: 10px;
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }
        
        .resolution-option:hover {
            border-color: #8B5CF6;
            background: #e0f2fe;
        }
        
        .resolution-option.active {
            background: linear-gradient(135deg, #8B5CF6 0%, #7C3AED 100%);
            color: white;
            border-color: #8B5CF6;
        }
        
        .file-type-option {
            padding: 10px;
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }
        
        .file-type-option:hover {
            border-color: #F59E0B;
            background: #e0f2fe;
        }
        
        .file-type-option.active {
            background: linear-gradient(135deg, #F59E0B 0%, #D97706 100%);
            color: white;
            border-color: #F59E0B;
        }
        
        .large-file-warning {
            background: linear-gradient(135deg, #FEF3C7 0%, #FDE68A 100%);
            border: 2px solid #F59E0B;
            border-radius: 12px;
            padding: 15px;
            margin-top: 15px;
        }
        
        .chunk-progress {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-top: 10px;
        }
        
        .chunk-info {
            font-size: 12px;
            color: #6b7280;
        }
        
        .estimated-time {
            background: #8B5CF6;
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            margin-top: 10px;
        }
        
        .video-info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .video-info-item {
            background: #f8fafc;
            border-radius: 8px;
            padding: 12px;
        }
        
        .video-info-label {
            font-size: 12px;
            color: #6b7280;
            margin-bottom: 4px;
        }
        
        .video-info-value {
            font-size: 14px;
            font-weight: 600;
            color: #374151;
        }
        
        .file-info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }
        
        .file-info-item {
            background: #f8fafc;
            border-radius: 8px;
            padding: 10px;
            text-align: center;
        }
        
        .file-info-label {
            font-size: 11px;
            color: #6b7280;
            margin-bottom: 3px;
        }
        
        .file-info-value {
            font-size: 13px;
            font-weight: 600;
            color: #374151;
        }
        
        .chunk-progress-container {
            margin-top: 15px;
        }
        
        .chunk-progress-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-size: 12px;
            color: #6b7280;
        }
        
        /* ============ STYLES RESPONSIVE ============ */
        @media (max-width: 768px) {
            .mobile-stack {
                flex-direction: column;
            }
            
            .mobile-full {
                width: 100% !important;
                margin-bottom: 1rem;
            }
            
            .mobile-padding {
                padding: 1rem !important;
            }
            
            .mobile-text-center {
                text-align: center !important;
            }
            
            .mobile-hide {
                display: none !important;
            }
            
            .mobile-show {
                display: block !important;
            }
            
            .mobile-grid-1 {
                grid-template-columns: 1fr !important;
            }
            
            .mobile-gap-2 {
                gap: 0.5rem !important;
            }
            
            .mobile-gap-4 {
                gap: 1rem !important;
            }
            
            .mobile-space-y-4 > * + * {
                margin-top: 1rem !important;
            }
            
            .mobile-space-y-2 > * + * {
                margin-top: 0.5rem !important;
            }
            
            .mobile-font-lg {
                font-size: 1.125rem !important;
            }
            
            .mobile-font-xl {
                font-size: 1.25rem !important;
            }
            
            .mobile-font-2xl {
                font-size: 1.5rem !important;
            }
            
            .mobile-font-3xl {
                font-size: 1.875rem !important;
            }
            
            .mobile-py-3 {
                padding-top: 0.75rem !important;
                padding-bottom: 0.75rem !important;
            }
            
            .mobile-px-4 {
                padding-left: 1rem !important;
                padding-right: 1rem !important;
            }
            
            .mobile-mt-4 {
                margin-top: 1rem !important;
            }
            
            .mobile-mb-4 {
                margin-bottom: 1rem !important;
            }
            
            .mobile-mt-2 {
                margin-top: 0.5rem !important;
            }
            
            .mobile-mb-2 {
                margin-bottom: 0.5rem !important;
            }
            
            .mobile-btn {
                padding: 12px 16px !important;
                font-size: 16px !important;
                min-height: 48px !important;
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
            }
            
            .mobile-btn-sm {
                padding: 10px 14px !important;
                font-size: 14px !important;
                min-height: 40px !important;
            }
            
            .mobile-icon-btn {
                width: 40px !important;
                height: 40px !important;
                min-width: 40px !important;
            }
            
            input[type="range"] {
                height: 12px !important;
            }
            
            input[type="range"]::-webkit-slider-thumb {
                width: 28px !important;
                height: 28px !important;
            }
            
            .mobile-leading-relaxed {
                line-height: 1.625 !important;
            }
            
            .mobile-line-clamp-3 {
                display: -webkit-box;
                -webkit-line-clamp: 3;
                line-clamp: 3;
                -webkit-box-orient: vertical;
                overflow: hidden;
            }
            
            .drop-zone, .quality-dropzone, .remove-bg-dropzone, .video-dropzone, .file-dropzone {
                padding: 1.5rem !important;
            }
            
            .sarah-hero {
                width: 100px !important;
                height: 100px !important;
            }
            
            .hero-section {
                margin-bottom: 1.5rem !important;
                padding: 1.5rem !important;
            }
            
            .design-card, .quality-improvement-card, .remove-bg-card, .video-compression-card, .file-compression-card {
                padding: 1rem !important;
            }
            
            .video-quality-option, .resolution-option, .file-type-option {
                padding: 10px !important;
            }
            
            .video-quality-icon {
                width: 40px !important;
                height: 40px !important;
                font-size: 16px !important;
            }
        }
        
        @media (max-width: 640px) {
            .xs-grid-1 {
                grid-template-columns: 1fr !important;
            }
            
            .xs-text-sm {
                font-size: 0.875rem !important;
            }
            
            .xs-text-base {
                font-size: 1rem !important;
            }
            
            .xs-p-3 {
                padding: 0.75rem !important;
            }
            
            .xs-p-4 {
                padding: 1rem !important;
            }
            
            .xs-gap-2 {
                gap: 0.5rem !important;
            }
            
            .xs-space-y-2 > * + * {
                margin-top: 0.5rem !important;
            }
            
            .xs-font-medium {
                font-weight: 500 !important;
            }
            
            .xs-flex-col {
                flex-direction: column !important;
            }
            
            .xs-items-center {
                align-items: center !important;
            }
            
            .xs-text-center {
                text-align: center !important;
            }
            
            .quality-icon {
                width: 50px !important;
                height: 50px !important;
                font-size: 20px !important;
            }
            
            .quality-option {
                padding: 15px !important;
            }
        }
        
        @media (max-width: 480px) {
            .xxs-text-xs {
                font-size: 0.75rem !important;
            }
            
            .xxs-text-sm {
                font-size: 0.875rem !important;
            }
            
            .xxs-p-2 {
                padding: 0.5rem !important;
            }
            
            .xxs-p-3 {
                padding: 0.75rem !important;
            }
            
            .xxs-gap-1 {
                gap: 0.25rem !important;
            }
            
            .xxs-space-y-1 > * + * {
                margin-top: 0.25rem !important;
            }
            
            .xxs-w-full {
                width: 100% !important;
            }
            
            .feature-badge, .new-badge, .pro-badge, .large-file-badge {
                font-size: 10px !important;
                padding: 3px 8px !important;
                margin-left: 4px !important;
            }
        }
        
        @media (min-width: 769px) and (max-width: 1024px) {
            .tablet-grid-2 {
                grid-template-columns: repeat(2, 1fr) !important;
            }
            
            .tablet-text-lg {
                font-size: 1.125rem !important;
            }
            
            .tablet-p-5 {
                padding: 1.25rem !important;
            }
        }
        
        @media (max-height: 600px) and (orientation: landscape) {
            .landscape-hide {
                display: none !important;
            }
            
            .landscape-p-2 {
                padding: 0.5rem !important;
            }
            
            .landscape-text-sm {
                font-size: 0.875rem !important;
            }
            
            .landscape-max-h-40 {
                max-height: 10rem !important;
            }
        }
        
        /* Prévenir les débordements horizontaux */
        body {
            overflow-x: hidden;
            max-width: 100vw;
        }
        
        img, canvas, video {
            max-width: 100%;
            height: auto;
        }
        
        input, textarea, select {
            font-size: 16px !important;
        }
        
        /* Support iOS */
        @supports (-webkit-touch-callout: none) {
            .safari-full-height {
                height: -webkit-fill-available;
            }
        }
        
        /* Prévenir les problèmes de hauteur sur iOS */
        .min-h-screen {
            min-height: 100vh;
            min-height: -webkit-fill-available;
        }
        
        html {
            height: -webkit-fill-available;
        }
        
        /* Amélioration des formulaires sur mobile */
        @media (max-width: 768px) {
            .enhancement-options, .bg-removal-options, .video-options, .file-options {
                grid-template-columns: repeat(2, 1fr) !important;
                gap: 8px !important;
            }
            
            .enhancement-option, .bg-removal-option, .video-option, .file-option {
                padding: 8px !important;
                font-size: 12px !important;
            }
            
            .scale-factor-btn {
                padding: 10px !important;
                font-size: 14px !important;
            }
        }
        
        /* Support pour les écrans très petits (iPhone SE) */
        @media (max-width: 375px) {
            .container {
                padding-left: 12px !important;
                padding-right: 12px !important;
            }
            
            .px-3 {
                padding-left: 12px !important;
                padding-right: 12px !important;
            }
        }
        
        /* Style pour la prévisualisation des fichiers */
        .file-preview {
            background: #f8fafc;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
        }
        
        .file-icon {
            font-size: 48px;
            color: #F59E0B;
            margin-bottom: 10px;
        }
        
        .file-details {
            text-align: center;
        }
        
        .file-name {
            font-weight: 600;
            font-size: 14px;
            color: #374151;
            word-break: break-all;
        }
        
        .file-meta {
            font-size: 12px;
            color: #6b7280;
            margin-top: 5px;
        }
        
        .compression-level {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            margin: 5px;
        }
        
        .level-low {
            background-color: #10B981;
            color: white;
        }
        
        .level-medium {
            background-color: #3B82F6;
            color: white;
        }
        
        .level-high {
            background-color: #EF4444;
            color: white;
        }
        
        .archive-options {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-top: 15px;
        }
        
        .archive-option {
            padding: 15px;
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }
        
        .archive-option:hover {
            border-color: #F59E0B;
            background: #e0f2fe;
        }
        
        .archive-option.active {
            background: linear-gradient(135deg, #F59E0B 0%, #D97706 100%);
            color: white;
            border-color: #F59E0B;
        }
        
        .archive-icon {
            font-size: 24px;
            margin-bottom: 10px;
        }
        
        .optimized-video-option {
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .optimized-video-option:hover {
            border-color: #8B5CF6;
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(139, 92, 246, 0.1);
        }
        
        .optimized-video-option.active {
            border-color: #8B5CF6;
            background: linear-gradient(135deg, #8B5CF6 0%, #7C3AED 100%);
            color: white;
        }
    </style>
</head>
<body class="gradient-bg min-h-screen flex flex-col">
    <!-- Navigation Bar Sarah IA -->
    <nav class="navbar-gradient py-3 md:py-4 px-4 md:px-6 sticky top-0 z-50">
        <div class="container mx-auto flex justify-between items-center">
            <div class="flex items-center">
                <img src="SARAH AI.jpg" alt="Sarah IA" class="w-10 h-10 md:w-12 md:h-12 rounded-full border-2 border-white mr-3">
                <div>
                    <h1 class="text-lg md:text-xl font-bold text-white flex items-center">
                        Sarah IA 
                        <span class="ml-1 md:ml-2 text-xs bg-blue-500/30 px-2 py-1 rounded">Design AI Pro</span>
                    </h1>
                    <p class="text-white/80 text-xs hidden md:block">Compression • Amélioration • Suppression Arrière-plan • Vidéo 10GB</p>
                    <p class="text-white/80 text-xs md:hidden">Design AI Pro</p>
                </div>
            </div>
            
            <div class="flex items-center space-x-2 md:space-x-4">
                <a href="index.html" class="bg-white/20 hover:bg-white/30 text-white py-2 px-3 md:px-4 rounded-lg flex items-center btn-hover-effect mobile-btn-sm">
                    <i class="fas fa-robot mr-1 md:mr-2"></i>
                    <span class="hidden md:inline">Sarah IA</span>
                    <span class="md:hidden">Chat</span>
                </a>
                <button id="voiceBtn" class="bg-orange-500 hover:bg-orange-600 text-white p-2 rounded-full btn-hover-effect mobile-icon-btn">
                    <i class="fas fa-microphone"></i>
                </button>
            </div>
        </div>
    </nav>

    <!-- Contenu principal -->
    <main class="flex-1 container mx-auto py-4 md:py-8 px-3 md:px-6 mobile-padding">
        <!-- Section Héro avec Sarah -->
        <div class="hero-section p-4 md:p-8 mb-6 md:mb-8 slide-up">
            <div class="hero-content text-center">
                <div class="mb-4 md:mb-6">
                    <img src="SARAH AI.jpg" alt="Sarah AI" class="sarah-hero w-24 h-24 md:w-32 md:h-32 lg:w-40 lg:h-40">
                </div>
                <h1 class="text-2xl md:text-4xl lg:text-5xl font-bold mb-3 md:mb-4 mobile-font-2xl">Sarah IA</h1>
                <p class="text-base md:text-xl mb-4 md:mb-6 mobile-text-center">Votre assistante IA avancée pour le traitement d'images, vidéos et fichiers</p>
                <div class="flex flex-wrap justify-center gap-2 md:gap-4 mobile-gap-2">
                    <span class="bg-white/20 px-3 py-1 md:px-4 md:py-2 rounded-full text-xs md:text-sm">
                        <i class="fas fa-compress-alt mr-1"></i>Compression IA
                    </span>
                    <span class="bg-white/20 px-3 py-1 md:px-4 md:py-2 rounded-full text-xs md:text-sm">
                        <i class="fas fa-star mr-1"></i>Amélioration Qualité
                    </span>
                    <span class="bg-white/20 px-3 py-1 md:px-4 md:py-2 rounded-full text-xs md:text-sm">
                        <i class="fas fa-eraser mr-1"></i>Suppression Arrière-plan
                    </span>
                    <span class="bg-white/20 px-3 py-1 md:px-4 md:py-2 rounded-full text-xs md:text-sm">
                        <i class="fas fa-video mr-1"></i>Vidéo jusqu'à 10GB
                    </span>
                    <span class="bg-white/20 px-3 py-1 md:px-4 md:py-2 rounded-full text-xs md:text-sm">
                        <i class="fas fa-file-archive mr-1"></i>Compression Fichiers
                    </span>
                </div>
            </div>
        </div>
        
        <div class="mb-6 md:mb-8 text-center slide-up">
            <h2 class="text-xl md:text-2xl lg:text-3xl font-bold text-gray-800 mb-3 md:mb-4 mobile-font-xl">Traitement Avancé par IA</h2>
            <p class="text-gray-600 text-base md:text-lg lg:text-xl mobile-text-center mobile-leading-relaxed">Compression d'images, vidéos, fichiers et amélioration de qualité intelligente</p>
            <div class="flex flex-wrap justify-center gap-2 mt-3 md:mt-4 mobile-gap-2">
                <span class="feature-badge text-xs">
                    <i class="fas fa-compress-alt mr-1"></i>Compression intelligente
                </span>
                <span class="feature-badge text-xs">
                    <i class="fas fa-star mr-1"></i>Amélioration qualité
                </span>
                <span class="new-badge text-xs">
                    <i class="fas fa-eraser mr-1"></i>Suppression arrière-plan
                </span>
                <span class="large-file-badge text-xs">
                    <i class="fas fa-video mr-1"></i>Vidéo 10GB supportée
                </span>
                <span class="pro-badge text-xs">
                    <i class="fas fa-file-archive mr-1"></i>Compression fichiers
                </span>
            </div>
        </div>
        
        <!-- Section Compression d'Images -->
        <div class="design-card rounded-2xl p-4 md:p-6 mb-6 md:mb-8 slide-up mobile-padding">
            <div class="flex flex-col md:flex-row md:items-center mb-4 md:mb-6 mobile-space-y-2">
                <div class="w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center text-blue-500 mr-0 md:mr-4 mb-3 md:mb-0 mx-auto md:mx-0">
                    <i class="fas fa-compress-alt text-2xl"></i>
                </div>
                <div class="text-center md:text-left">
                    <h2 class="text-xl md:text-2xl font-bold text-gray-800 mobile-font-lg">Compression Intelligente d'Images</h2>
                    <p class="text-gray-600 text-sm md:text-base mobile-text-center md:text-left">Réduisez la taille de vos images sans sacrifier la qualité visuelle</p>
                </div>
            </div>
            
            <!-- Zone de téléchargement -->
            <div class="mb-6 md:mb-8">
                <div class="drop-zone rounded-xl p-4 md:p-8 text-center cursor-pointer mobile-padding" id="compressionDropZone">
                    <div class="py-4 md:py-8">
                        <i class="fas fa-cloud-upload-alt text-4xl md:text-5xl text-blue-400 mb-3 md:mb-4"></i>
                        <p class="text-lg md:text-xl font-medium text-gray-700 mb-2 mobile-font-lg">Glissez votre image ici</p>
                        <p class="text-gray-500 mb-4 md:mb-6 text-sm md:text-base">ou cliquez pour sélectionner une image</p>
                        <button id="compressionUploadBtn" class="bg-blue-500 hover:bg-blue-600 text-white px-6 md:px-8 py-2 md:py-3 rounded-lg transition flex items-center justify-center mx-auto mobile-btn">
                            <i class="fas fa-folder-open mr-2"></i>Sélectionner une image
                        </button>
                        <input type="file" id="compressionImageInput" accept="image/*" class="hidden">
                        <p class="text-xs md:text-sm text-gray-400 mt-3 md:mt-4">Formats supportés: JPG, PNG, GIF, WEBP - jusqu'à 20MB</p>
                    </div>
                </div>
                
                <!-- Aperçu du fichier -->
                <div id="compressionPreview" class="mt-4 md:mt-6 hidden">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6 mobile-gap-4">
                        <div>
                            <h4 class="font-bold text-gray-700 mb-2 md:mb-3 mobile-font-lg">Image originale</h4>
                            <div class="image-preview-container rounded-xl overflow-hidden p-3 md:p-4">
                                <img id="originalPreviewImg" class="preview-image mx-auto" alt="Image originale">
                            </div>
                            <div class="mt-2 md:mt-3 text-center">
                                <p id="originalSize" class="text-gray-600 text-sm md:text-base"></p>
                                <p id="originalDimensions" class="text-xs md:text-sm text-gray-500"></p>
                            </div>
                        </div>
                        <div>
                            <h4 class="font-bold text-gray-700 mb-2 md:mb-3 mobile-font-lg">Image compressée</h4>
                            <div class="image-preview-container rounded-xl overflow-hidden p-3 md:p-4">
                                <div id="compressedPreviewPlaceholder" class="h-48 md:h-64 flex items-center justify-center">
                                    <i class="fas fa-compress-alt text-3xl md:text-4xl text-gray-300"></i>
                                </div>
                                <img id="compressedPreviewImg" class="preview-image mx-auto hidden" alt="Image compressée">
                            </div>
                            <div class="mt-2 md:mt-3 text-center">
                                <p id="compressedSize" class="text-gray-600 text-sm md:text-base hidden"></p>
                                <p id="compressionRatio" class="text-xs md:text-sm text-gray-500 hidden"></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Contrôles de compression -->
            <div class="mb-6 md:mb-8">
                <h3 class="font-bold text-gray-700 mb-3 md:mb-4 text-lg mobile-font-lg">Paramètres de compression :</h3>
                <div class="space-y-4 md:space-y-6">
                    <div>
                        <label class="flex items-center justify-between mb-2">
                            <span class="text-gray-700 text-sm md:text-base">Qualité de compression :</span>
                            <span id="compressionQualityValue" class="font-bold text-blue-600 text-sm md:text-base">80%</span>
                        </label>
                        <input type="range" id="compressionQualitySlider" min="10" max="100" value="80" class="compression-slider">
                        <div class="flex justify-between text-xs md:text-sm text-gray-500 mt-1">
                            <span>Plus compressé</span>
                            <span>Meilleure qualité</span>
                        </div>
                    </div>
                    
                    <div>
                        <label class="flex items-center justify-between mb-2">
                            <span class="text-gray-700 text-sm md:text-base">Largeur maximale :</span>
                            <span id="maxWidthValue" class="font-bold text-blue-600 text-sm md:text-base">1920px</span>
                        </label>
                        <input type="range" id="maxWidthSlider" min="320" max="3840" value="1920" step="160" class="compression-slider">
                        <div class="flex justify-between text-xs md:text-sm text-gray-500 mt-1">
                            <span>320px</span>
                            <span>3840px (4K)</span>
                        </div>
                    </div>
                    
                    <div class="enhancement-options">
                        <div class="enhancement-option active" data-enhancement="keep-metadata">
                            <i class="fas fa-info-circle mb-2"></i>
                            <p class="text-xs md:text-sm">Garder les métadonnées</p>
                        </div>
                        <div class="enhancement-option" data-enhancement="optimize-for-web">
                            <i class="fas fa-globe mb-2"></i>
                            <p class="text-xs md:text-sm">Optimiser pour le web</p>
                        </div>
                        <div class="enhancement-option" data-enhancement="preserve-exif">
                            <i class="fas fa-camera mb-2"></i>
                            <p class="text-xs md:text-sm">Préserver EXIF</p>
                        </div>
                        <div class="enhancement-option" data-enhancement="auto-rotate">
                            <i class="fas fa-sync-alt mb-2"></i>
                            <p class="text-xs md:text-sm">Rotation auto</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Bouton de compression -->
            <div class="text-center">
                <button id="compressImageBtn" class="compression-btn px-8 md:px-10 py-3 md:py-4 text-base md:text-lg font-bold disabled:opacity-50 w-full mobile-btn" disabled>
                    <i class="fas fa-compress-alt mr-2"></i>
                    <span id="compressBtnText">Compresser l'image</span>
                    <span id="compressingText" class="hidden">
                        <div class="loader mx-auto"></div>
                    </span>
                </button>
                
                <!-- Résultats de compression -->
                <div id="compressionResults" class="mt-6 md:mt-8 hidden">
                    <div class="flex flex-col md:flex-row md:items-center justify-between mb-4 md:mb-6 mobile-space-y-2">
                        <div class="flex items-center justify-center md:justify-start mb-2 md:mb-0">
                            <div class="result-badge px-3 md:px-4 py-1 md:py-2 rounded-full flex items-center text-sm md:text-base">
                                <i class="fas fa-check mr-2"></i>
                                Compression réussie !
                            </div>
                        </div>
                        <div class="text-green-600 font-bold text-center md:text-right text-sm md:text-base">
                            <i class="fas fa-clock mr-1"></i>
                            <span id="compressionTime">0</span>s
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 xs:grid-cols-3 gap-3 md:gap-4 mb-4 md:mb-6">
                        <div class="bg-blue-50 rounded-lg p-3 md:p-4 text-center">
                            <p class="text-xs md:text-sm text-gray-600">Taille originale</p>
                            <p id="finalOriginalSize" class="text-lg md:text-xl font-bold text-blue-600 mobile-font-lg">-- MB</p>
                        </div>
                        <div class="bg-green-50 rounded-lg p-3 md:p-4 text-center">
                            <p class="text-xs md:text-sm text-gray-600">Taille compressée</p>
                            <p id="finalCompressedSize" class="text-lg md:text-xl font-bold text-green-600 mobile-font-lg">-- MB</p>
                        </div>
                        <div class="bg-purple-50 rounded-lg p-3 md:p-4 text-center">
                            <p class="text-xs md:text-sm text-gray-600">Économie</p>
                            <p id="compressionSavings" class="text-lg md:text-xl font-bold text-purple-600 mobile-font-lg">-- %</p>
                        </div>
                    </div>
                    
                    <!-- Actions -->
                    <div class="grid grid-cols-1 xs:grid-cols-2 gap-3">
                        <button id="downloadCompressedBtn" class="download-btn py-3 rounded-lg flex items-center justify-center mobile-btn">
                            <i class="fas fa-download mr-2"></i>
                            Télécharger
                        </button>
                        <button id="newCompressionBtn" class="bg-gray-500 hover:bg-gray-600 text-white py-3 rounded-lg transition flex items-center justify-center mobile-btn">
                            <i class="fas fa-redo mr-2"></i>
                            Nouvelle compression
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Section Amélioration de Qualité -->
        <div class="quality-improvement-card rounded-2xl p-4 md:p-6 mb-6 md:mb-8 slide-up mobile-padding">
            <div class="flex flex-col md:flex-row md:items-center mb-4 md:mb-6 mobile-space-y-2">
                <div class="w-12 h-12 rounded-full bg-purple-100 flex items-center justify-center text-purple-500 mr-0 md:mr-4 mb-3 md:mb-0 mx-auto md:mx-0">
                    <i class="fas fa-star text-2xl"></i>
                </div>
                <div class="text-center md:text-left">
                    <h2 class="text-xl md:text-2xl font-bold text-gray-800 mobile-font-lg">Amélioration de Qualité d'Image par IA</h2>
                    <p class="text-gray-600 text-sm md:text-base mobile-text-center md:text-left">Améliorez la résolution et les détails de vos images avec l'intelligence artificielle</p>
                </div>
            </div>
            
            <!-- Zone de téléchargement qualité -->
            <div class="mb-6 md:mb-8">
                <div class="quality-dropzone rounded-xl p-4 md:p-8 text-center cursor-pointer mobile-padding" id="qualityDropZone">
                    <div class="py-4 md:py-8">
                        <i class="fas fa-cloud-upload-alt text-4xl md:text-5xl text-purple-400 mb-3 md:mb-4"></i>
                        <p class="text-lg md:text-xl font-medium text-gray-700 mb-2 mobile-font-lg">Glissez votre image ici</p>
                        <p class="text-gray-500 mb-4 md:mb-6 text-sm md:text-base">ou cliquez pour sélectionner une image à améliorer</p>
                        <button id="qualityUploadBtn" class="quality-btn px-6 md:px-8 py-2 md:py-3 rounded-lg mobile-btn">
                            <i class="fas fa-folder-open mr-2"></i>Sélectionner une image
                        </button>
                        <input type="file" id="qualityImageInput" accept="image/*" class="hidden">
                        <p class="text-xs md:text-sm text-gray-400 mt-3 md:mt-4">Formats supportés: JPG, PNG - jusqu'à 10MB</p>
                    </div>
                </div>
                
                <!-- Aperçu du fichier qualité -->
                <div id="qualityPreview" class="mt-4 md:mt-6 hidden">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6 mobile-gap-4">
                        <div>
                            <h4 class="font-bold text-gray-700 mb-2 md:mb-3 mobile-font-lg">Image originale</h4>
                            <div class="image-preview-container rounded-xl overflow-hidden p-3 md:p-4">
                                <img id="qualityOriginalPreviewImg" class="preview-image mx-auto" alt="Image originale">
                            </div>
                            <div class="mt-2 md:mt-3 text-center">
                                <p id="qualityOriginalSize" class="text-gray-600 text-sm md:text-base"></p>
                                <p id="qualityOriginalDimensions" class="text-xs md:text-sm text-gray-500"></p>
                            </div>
                        </div>
                        <div>
                            <h4 class="font-bold text-gray-700 mb-2 md:mb-3 mobile-font-lg">Image améliorée</h4>
                            <div class="image-preview-container rounded-xl overflow-hidden p-3 md:p-4">
                                <div id="qualityImprovedPreviewPlaceholder" class="h-48 md:h-64 flex items-center justify-center">
                                    <i class="fas fa-star text-3xl md:text-4xl text-gray-300"></i>
                                </div>
                                <img id="qualityImprovedPreviewImg" class="preview-image mx-auto hidden" alt="Image améliorée">
                            </div>
                            <div class="mt-2 md:mt-3 text-center">
                                <p id="qualityImprovedSize" class="text-gray-600 text-sm md:text-base hidden"></p>
                                <p id="qualityImprovedDimensions" class="text-xs md:text-sm text-gray-500 hidden"></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Options d'amélioration -->
            <div class="mb-6 md:mb-8">
                <h3 class="font-bold text-gray-700 mb-3 md:mb-4 text-lg mobile-font-lg">Options d'amélioration :</h3>
                
                <!-- Facteur d'échelle -->
                <div class="mb-4 md:mb-6">
                    <label class="flex items-center justify-between mb-2">
                        <span class="text-gray-700 text-sm md:text-base">Facteur d'échelle :</span>
                        <span id="scaleFactorValue" class="font-bold text-purple-600 text-sm md:text-base">2x</span>
                    </label>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-2 mb-3 md:mb-4">
                        <button class="scale-factor-btn py-2 md:py-3 rounded-lg border border-purple-300 hover:bg-purple-50 text-sm md:text-base" data-factor="2">2x</button>
                        <button class="scale-factor-btn py-2 md:py-3 rounded-lg border border-purple-300 hover:bg-purple-50 text-sm md:text-base" data-factor="4">4x</button>
                        <button class="scale-factor-btn py-2 md:py-3 rounded-lg border border-purple-300 hover:bg-purple-50 text-sm md:text-base" data-factor="8">8x</button>
                        <button class="scale-factor-btn py-2 md:py-3 rounded-lg border border-purple-300 bg-purple-100 text-sm md:text-base" data-factor="auto">Auto</button>
                    </div>
                </div>
                
                <!-- Type d'amélioration -->
                <div class="mb-4 md:mb-6">
                    <label class="block text-gray-700 mb-2 text-sm md:text-base">Type d'amélioration :</label>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                        <div class="quality-option active" data-improvement="upscale">
                            <div class="quality-icon bg-purple-100 text-purple-600">
                                <i class="fas fa-expand-arrows-alt"></i>
                            </div>
                            <h4 class="font-bold text-sm md:text-base">Upscaling</h4>
                            <p class="text-xs md:text-sm text-gray-500 mt-2">Augmente la résolution</p>
                        </div>
                        
                        <div class="quality-option" data-improvement="denoise">
                            <div class="quality-icon bg-blue-100 text-blue-600">
                                <i class="fas fa-eraser"></i>
                            </div>
                            <h4 class="font-bold text-sm md:text-base">Réduction bruit</h4>
                            <p class="text-xs md:text-sm text-gray-500 mt-2">Supprime le bruit numérique</p>
                        </div>
                        
                        <div class="quality-option" data-improvement="sharpen">
                            <div class="quality-icon bg-green-100 text-green-600">
                                <i class="fas fa-search"></i>
                            </div>
                            <h4 class="font-bold text-sm md:text-base">Netteté</h4>
                            <p class="text-xs md:text-sm text-gray-500 mt-2">Améliore les détails</p>
                        </div>
                    </div>
                </div>
                
                <!-- Options avancées -->
                <div class="mb-4 md:mb-6">
                    <h4 class="font-bold text-gray-700 mb-3 text-sm md:text-base">Options avancées :</h4>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-4">
                        <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                            <div class="flex items-center">
                                <i class="fas fa-palette text-purple-500 mr-2 md:mr-3"></i>
                                <div>
                                    <p class="font-medium text-gray-800 text-sm md:text-base">Correction couleurs</p>
                                    <p class="text-xs md:text-sm text-gray-500">Améliore les couleurs</p>
                                </div>
                            </div>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" id="colorCorrectionOption" class="sr-only peer" checked>
                                <div class="w-10 h-5 md:w-11 md:h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 md:after:h-5 md:after:w-5 after:transition-all peer-checked:bg-purple-600"></div>
                            </label>
                        </div>
                        
                        <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                            <div class="flex items-center">
                                <i class="fas fa-eye text-purple-500 mr-2 md:mr-3"></i>
                                <div>
                                    <p class="font-medium text-gray-800 text-sm md:text-base">Détails visages</p>
                                    <p class="text-xs md:text-sm text-gray-500">Optimise les portraits</p>
                                </div>
                            </div>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" id="faceEnhancementOption" class="sr-only peer">
                                <div class="w-10 h-5 md:w-11 md:h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 md:after:h-5 md:after:w-5 after:transition-all peer-checked:bg-purple-600"></div>
                            </label>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Bouton d'amélioration -->
            <div class="text-center">
                <button id="improveQualityBtn" class="quality-btn px-8 md:px-10 py-3 md:py-4 text-base md:text-lg font-bold disabled:opacity-50 w-full mobile-btn" disabled>
                    <i class="fas fa-magic mr-2"></i>
                    <span id="improveBtnText">Améliorer la qualité</span>
                    <span id="improvingText" class="hidden">
                        <div class="loader mx-auto"></div>
                    </span>
                </button>
                
                <!-- Barre de progression -->
                <div id="qualityProgress" class="mt-3 md:mt-4 hidden">
                    <div class="flex justify-between mb-1">
                        <span class="text-sm font-medium text-purple-700">Amélioration en cours...</span>
                        <span id="qualityProgressPercent" class="text-sm font-medium text-purple-700">0%</span>
                    </div>
                    <div class="progress-bar-container">
                        <div id="qualityProgressBar" class="progress-bar" style="width: 0%"></div>
                    </div>
                </div>
            </div>
            
            <!-- Résultats d'amélioration -->
            <div id="qualityResults" class="mt-6 md:mt-8 hidden">
                <div class="flex flex-col md:flex-row md:items-center justify-between mb-4 md:mb-6 mobile-space-y-2">
                    <div class="flex items-center justify-center md:justify-start mb-2 md:mb-0">
                        <div class="result-badge px-3 md:px-4 py-1 md:py-2 rounded-full flex items-center text-sm md:text-base">
                            <i class="fas fa-check mr-2"></i>
                            Amélioration réussie !
                        </div>
                    </div>
                    <div class="text-green-600 font-bold text-center md:text-right text-sm md:text-base">
                        <i class="fas fa-clock mr-1"></i>
                        <span id="qualityImprovementTime">0</span>s
                    </div>
                </div>
                
                <!-- Comparaison avant/après -->
                <div class="mb-4 md:mb-6">
                    <h4 class="font-bold text-gray-700 mb-2 md:mb-3 text-sm md:text-base">Comparaison :</h4>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6">
                        <div class="text-center">
                            <div class="image-preview-container rounded-xl overflow-hidden p-3 md:p-4 mb-2">
                                <img id="finalOriginalQualityImg" class="preview-image mx-auto" alt="Original">
                            </div>
                            <p class="text-sm text-gray-600">Avant</p>
                            <p id="finalOriginalQualitySize" class="text-xs text-gray-500"></p>
                        </div>
                        <div class="text-center">
                            <div class="image-preview-container rounded-xl overflow-hidden p-3 md:p-4 mb-2">
                                <img id="finalImprovedQualityImg" class="preview-image mx-auto" alt="Amélioré">
                            </div>
                            <p class="text-sm text-gray-600">Après</p>
                            <p id="finalImprovedQualitySize" class="text-xs text-gray-500"></p>
                        </div>
                    </div>
                </div>
                
                <!-- Statistiques -->
                <div class="grid grid-cols-1 xs:grid-cols-3 gap-3 md:gap-4 mb-4 md:mb-6">
                    <div class="bg-purple-50 rounded-lg p-3 md:p-4 text-center">
                        <p class="text-xs md:text-sm text-gray-600">Résolution originale</p>
                        <p id="finalOriginalResolution" class="text-lg md:text-xl font-bold text-purple-600 mobile-font-lg">-- px</p>
                    </div>
                    <div class="bg-green-50 rounded-lg p-3 md:p-4 text-center">
                        <p class="text-xs md:text-sm text-gray-600">Nouvelle résolution</p>
                        <p id="finalImprovedResolution" class="text-lg md:text-xl font-bold text-green-600 mobile-font-lg">-- px</p>
                    </div>
                    <div class="bg-blue-50 rounded-lg p-3 md:p-4 text-center">
                        <p class="text-xs md:text-sm text-gray-600">Amélioration</p>
                        <p id="improvementFactor" class="text-lg md:text-xl font-bold text-blue-600 mobile-font-lg">-- x</p>
                    </div>
                </div>
                
                <!-- Actions -->
                <div class="grid grid-cols-1 xs:grid-cols-2 gap-3">
                    <button id="downloadImprovedBtn" class="download-btn py-3 rounded-lg flex items-center justify-center mobile-btn">
                        <i class="fas fa-download mr-2"></i>
                        Télécharger
                    </button>
                    <button id="newQualityImprovementBtn" class="bg-gray-500 hover:bg-gray-600 text-white py-3 rounded-lg transition flex items-center justify-center mobile-btn">
                        <i class="fas fa-redo mr-2"></i>
                        Nouvelle amélioration
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Section Suppression d'Arrière-plan -->
        <div class="remove-bg-card rounded-2xl p-4 md:p-6 mb-6 md:mb-8 slide-up mobile-padding">
            <div class="flex flex-col md:flex-row md:items-center mb-4 md:mb-6 mobile-space-y-2">
                <div class="w-12 h-12 rounded-full bg-green-100 flex items-center justify-center text-green-500 mr-0 md:mr-4 mb-3 md:mb-0 mx-auto md:mx-0">
                    <i class="fas fa-eraser text-2xl"></i>
                </div>
                <div class="text-center md:text-left">
                    <h2 class="text-xl md:text-2xl font-bold text-gray-800 mobile-font-lg">Suppression d'Arrière-plan par IA</h2>
                    <p class="text-gray-600 text-sm md:text-base mobile-text-center md:text-left">Supprimez automatiquement l'arrière-plan de vos images avec une précision professionnelle</p>
                    <div id="removeBgApiStatus" class="api-status loading mt-2 text-xs md:text-sm">
                        <i class="fas fa-sync-alt animate-spin mr-1"></i>Vérification de l'API remove.bg...
                    </div>
                </div>
            </div>
            
            <!-- Zone de téléchargement -->
            <div class="mb-6 md:mb-8">
                <div class="remove-bg-dropzone rounded-xl p-4 md:p-8 text-center cursor-pointer mobile-padding" id="removeBgDropZone">
                    <div class="py-4 md:py-8">
                        <i class="fas fa-cloud-upload-alt text-4xl md:text-5xl text-green-400 mb-3 md:mb-4"></i>
                        <p class="text-lg md:text-xl font-medium text-gray-700 mb-2 mobile-font-lg">Glissez votre image ici</p>
                        <p class="text-gray-500 mb-4 md:mb-6 text-sm md:text-base">ou cliquez pour sélectionner une image</p>
                        <button id="removeBgUploadBtn" class="remove-bg-btn px-6 md:px-8 py-2 md:py-3 rounded-lg mobile-btn">
                            <i class="fas fa-folder-open mr-2"></i>Sélectionner une image
                        </button>
                        <input type="file" id="removeBgImageInput" accept="image/*" class="hidden">
                        <p class="text-xs md:text-sm text-gray-400 mt-3 md:mt-4">Formats supportés: JPG, PNG - jusqu'à 5MB</p>
                    </div>
                </div>
                
                <!-- Aperçu du fichier -->
                <div id="removeBgPreview" class="mt-4 md:mt-6 hidden">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6 mobile-gap-4">
                        <div>
                            <h4 class="font-bold text-gray-700 mb-2 md:mb-3 mobile-font-lg">Image originale</h4>
                            <div class="image-preview-container rounded-xl overflow-hidden p-3 md:p-4">
                                <img id="removeBgOriginalPreviewImg" class="preview-image mx-auto" alt="Image originale">
                            </div>
                            <div class="mt-2 md:mt-3 text-center">
                                <p id="removeBgOriginalSize" class="text-gray-600 text-sm md:text-base"></p>
                                <p id="removeBgOriginalDimensions" class="text-xs md:text-sm text-gray-500"></p>
                            </div>
                        </div>
                        <div>
                            <h4 class="font-bold text-gray-700 mb-2 md:mb-3 mobile-font-lg">Arrière-plan supprimé</h4>
                            <div class="image-preview-container rounded-xl overflow-hidden p-3 md:p-4">
                                <div id="removeBgResultPlaceholder" class="h-48 md:h-64 flex items-center justify-center">
                                    <i class="fas fa-eraser text-3xl md:text-4xl text-gray-300"></i>
                                </div>
                                <img id="removeBgResultPreviewImg" class="preview-image mx-auto hidden" alt="Arrière-plan supprimé">
                            </div>
                            <div class="mt-2 md:mt-3 text-center">
                                <p id="removeBgResultSize" class="text-gray-600 text-sm md:text-base hidden"></p>
                                <p id="removeBgResultDimensions" class="text-xs md:text-sm text-gray-500 hidden"></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Options de suppression d'arrière-plan -->
            <div class="mb-6 md:mb-8">
                <h3 class="font-bold text-gray-700 mb-3 md:mb-4 text-lg mobile-font-lg">Options de suppression :</h3>
                
                <div class="bg-removal-options">
                    <div class="bg-removal-option active" data-bg-option="auto">
                        <i class="fas fa-robot mb-2"></i>
                        <p class="text-xs md:text-sm">Détection automatique</p>
                    </div>
                    <div class="bg-removal-option" data-bg-option="person">
                        <i class="fas fa-user mb-2"></i>
                        <p class="text-xs md:text-sm">Personne</p>
                    </div>
                    <div class="bg-removal-option" data-bg-option="product">
                        <i class="fas fa-box mb-2"></i>
                        <p class="text-xs md:text-sm">Produit</p>
                    </div>
                    <div class="bg-removal-option" data-bg-option="car">
                        <i class="fas fa-car mb-2"></i>
                        <p class="text-xs md:text-sm">Véhicule</p>
                    </div>
                </div>
                
                <!-- Options avancées -->
                <div class="mt-4 md:mt-6">
                    <h4 class="font-bold text-gray-700 mb-3 text-sm md:text-base">Options avancées :</h4>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-4">
                        <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                            <div class="flex items-center">
                                <i class="fas fa-brush text-green-500 mr-2 md:mr-3"></i>
                                <div>
                                    <p class="font-medium text-gray-800 text-sm md:text-base">Lissage des bords</p>
                                    <p class="text-xs md:text-sm text-gray-500">Bords plus naturels</p>
                                </div>
                            </div>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" id="edgeSmoothingOption" class="sr-only peer" checked>
                                <div class="w-10 h-5 md:w-11 md:h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-green-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 md:after:h-5 md:after:w-5 after:transition-all peer-checked:bg-green-600"></div>
                            </label>
                        </div>
                        
                        <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                            <div class="flex items-center">
                                <i class="fas fa-palette text-green-500 mr-2 md:mr-3"></i>
                                <div>
                                    <p class="font-medium text-gray-800 text-sm md:text-base">Fond de couleur</p>
                                    <p class="text-xs md:text-sm text-gray-500">Ajouter un fond uni</p>
                                </div>
                            </div>
                            <div class="flex items-center">
                                <input type="color" id="bgColorPicker" value="#ffffff" class="w-8 h-8 rounded cursor-pointer border border-gray-300">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Bouton de suppression -->
            <div class="text-center">
                <button id="removeBackgroundBtn" class="remove-bg-btn px-8 md:px-10 py-3 md:py-4 text-base md:text-lg font-bold disabled:opacity-50 w-full mobile-btn" disabled>
                    <i class="fas fa-eraser mr-2"></i>
                    <span id="removeBgBtnText">Supprimer l'arrière-plan</span>
                    <span id="removingBgText" class="hidden">
                        <div class="loader mx-auto"></div>
                    </span>
                </button>
                
                <!-- Barre de progression -->
                <div id="removeBgProgress" class="mt-3 md:mt-4 hidden">
                    <div class="flex justify-between mb-1">
                        <span class="text-sm font-medium text-green-700">Suppression en cours...</span>
                        <span id="removeBgProgressPercent" class="text-sm font-medium text-green-700">0%</span>
                    </div>
                    <div class="progress-bar-container">
                        <div id="removeBgProgressBar" class="remove-bg-progress-bar" style="width: 0%"></div>
                    </div>
                </div>
            </div>
            
            <!-- Résultats de suppression -->
            <div id="removeBgResults" class="mt-6 md:mt-8 hidden">
                <div class="flex flex-col md:flex-row md:items-center justify-between mb-4 md:mb-6 mobile-space-y-2">
                    <div class="flex items-center justify-center md:justify-start mb-2 md:mb-0">
                        <div class="result-badge px-3 md:px-4 py-1 md:py-2 rounded-full flex items-center text-sm md:text-base">
                            <i class="fas fa-check mr-2"></i>
                            Arrière-plan supprimé !
                        </div>
                    </div>
                    <div class="text-green-600 font-bold text-center md:text-right text-sm md:text-base">
                        <i class="fas fa-clock mr-1"></i>
                        <span id="removeBgTime">0</span>s
                    </div>
                </div>
                
                <!-- Comparaison avant/après -->
                <div class="mb-4 md:mb-6">
                    <h4 class="font-bold text-gray-700 mb-2 md:mb-3 text-sm md:text-base">Résultat :</h4>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6">
                        <div class="text-center">
                            <div class="image-preview-container rounded-xl overflow-hidden p-3 md:p-4 mb-2">
                                <img id="finalOriginalBgImg" class="preview-image mx-auto" alt="Original">
                            </div>
                            <p class="text-sm text-gray-600">Avant</p>
                            <p id="finalOriginalBgSize" class="text-xs text-gray-500"></p>
                        </div>
                        <div class="text-center">
                            <div class="image-preview-container rounded-xl overflow-hidden p-3 md:p-4 mb-2">
                                <img id="finalRemovedBgImg" class="preview-image mx-auto" alt="Arrière-plan supprimé">
                            </div>
                            <p class="text-sm text-gray-600">Après</p>
                            <p id="finalRemovedBgSize" class="text-xs text-gray-500"></p>
                        </div>
                    </div>
                </div>
                
                <!-- Actions -->
                <div class="grid grid-cols-1 xs:grid-cols-2 gap-3">
                    <button id="downloadRemovedBgBtn" class="download-btn py-3 rounded-lg flex items-center justify-center mobile-btn">
                        <i class="fas fa-download mr-2"></i>
                        Télécharger PNG
                    </button>
                    <button id="newRemoveBgBtn" class="bg-gray-500 hover:bg-gray-600 text-white py-3 rounded-lg transition flex items-center justify-center mobile-btn">
                        <i class="fas fa-redo mr-2"></i>
                        Nouvelle image
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Section Compression Vidéo 10GB Optimisée -->
        <div class="video-compression-card rounded-2xl p-4 md:p-6 mb-6 md:mb-8 slide-up mobile-padding">
            <div class="flex flex-col md:flex-row md:items-center mb-4 md:mb-6 mobile-space-y-2">
                <div class="w-12 h-12 rounded-full bg-purple-100 flex items-center justify-center text-purple-500 mr-0 md:mr-4 mb-3 md:mb-0 mx-auto md:mx-0">
                    <i class="fas fa-video text-2xl"></i>
                </div>
                <div class="text-center md:text-left">
                    <h2 class="text-xl md:text-2xl font-bold text-gray-800 mobile-font-lg">Compression Vidéo Pro jusqu'à 10GB</h2>
                    <p class="text-gray-600 text-sm md:text-base mobile-text-center md:text-left">Compressez des vidéos volumineuses sans perte de qualité notable - Version Optimisée</p>
                    <div class="flex flex-wrap gap-1 mt-2">
                        <span class="large-file-badge text-xs">
                            <i class="fas fa-hdd mr-1"></i>Support 10GB
                        </span>
                        <span class="pro-badge text-xs">
                            <i class="fas fa-bolt mr-1"></i>Compression rapide
                        </span>
                        <span class="feature-badge text-xs">
                            <i class="fas fa-chart-line mr-1"></i>Qualité préservée
                        </span>
                        <span class="new-badge text-xs">
                            <i class="fas fa-rocket mr-1"></i>Optimisée
                        </span>
                    </div>
                </div>
            </div>
            
            <!-- Avertissement fichiers volumineux -->
            <div id="largeFileWarning" class="large-file-warning hidden">
                <div class="flex items-start">
                    <i class="fas fa-exclamation-triangle text-yellow-500 text-lg mr-3 mt-1"></i>
                    <div>
                        <p class="font-bold text-yellow-800">Vidéo volumineuse détectée</p>
                        <p class="text-yellow-700 text-sm mt-1">
                            Votre vidéo est volumineuse. La compression sera effectuée par morceaux pour éviter les problèmes de mémoire.
                            Cette opération peut prendre plusieurs minutes selon la taille et la puissance de votre appareil.
                        </p>
                        <div class="mt-3 flex items-center text-sm">
                            <i class="fas fa-lightbulb text-yellow-500 mr-2"></i>
                            <span class="text-yellow-700">Conseil : Restez sur cette page pendant la compression</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Zone de téléchargement vidéo -->
            <div class="mb-6 md:mb-8">
                <div class="video-dropzone rounded-xl p-4 md:p-8 text-center cursor-pointer mobile-padding" id="videoDropZone">
                    <div class="py-4 md:py-8">
                        <i class="fas fa-cloud-upload-alt text-4xl md:text-5xl text-purple-400 mb-3 md:mb-4"></i>
                        <p class="text-lg md:text-xl font-medium text-gray-700 mb-2 mobile-font-lg">Glissez votre vidéo ici</p>
                        <p class="text-gray-500 mb-4 md:mb-6 text-sm md:text-base">ou cliquez pour sélectionner une vidéo</p>
                        <button id="videoUploadBtn" class="video-btn px-6 md:px-8 py-2 md:py-3 rounded-lg mobile-btn">
                            <i class="fas fa-folder-open mr-2"></i>Sélectionner une vidéo
                        </button>
                        <input type="file" id="videoInput" accept="video/*" class="hidden">
                        <p class="text-xs md:text-sm text-gray-400 mt-3 md:mt-4">Formats supportés: MP4, AVI, MOV, MKV, WMV - jusqu'à 10GB</p>
                    </div>
                </div>
                
                <!-- Aperçu de la vidéo -->
                <div id="videoPreview" class="mt-4 md:mt-6 hidden">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6 mobile-gap-4">
                        <div>
                            <h4 class="font-bold text-gray-700 mb-2 md:mb-3 mobile-font-lg">Vidéo originale</h4>
                            <div class="video-preview-container rounded-xl overflow-hidden p-3 md:p-4">
                                <video id="originalVideoPreview" class="preview-video mx-auto" controls>
                                    Votre navigateur ne supporte pas la lecture de vidéos.
                                </video>
                            </div>
                            <div class="mt-2 md:mt-3 text-center">
                                <p id="originalVideoSize" class="text-gray-600 text-sm md:text-base"></p>
                                <p id="originalVideoInfo" class="text-xs md:text-sm text-gray-500"></p>
                            </div>
                        </div>
                        <div>
                            <h4 class="font-bold text-gray-700 mb-2 md:mb-3 mobile-font-lg">Vidéo compressée</h4>
                            <div class="video-preview-container rounded-xl overflow-hidden p-3 md:p-4">
                                <div id="compressedVideoPlaceholder" class="h-48 md:h-64 flex items-center justify-center bg-gray-900">
                                    <i class="fas fa-video text-3xl md:text-4xl text-gray-300"></i>
                                </div>
                                <video id="compressedVideoPreview" class="preview-video mx-auto hidden" controls>
                                    Votre navigateur ne supporte pas la lecture de vidéos.
                                </video>
                            </div>
                            <div class="mt-2 md:mt-3 text-center">
                                <p id="compressedVideoSize" class="text-gray-600 text-sm md:text-base hidden"></p>
                                <p id="compressionVideoRatio" class="text-xs md:text-sm text-gray-500 hidden"></p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Informations vidéo -->
                    <div id="videoInfoContainer" class="mt-4 hidden">
                        <div class="video-info-grid">
                            <div class="video-info-item">
                                <div class="video-info-label">Durée</div>
                                <div id="videoDurationInfo" class="video-info-value">--:--</div>
                            </div>
                            <div class="video-info-item">
                                <div class="video-info-label">Résolution</div>
                                <div id="videoResolutionInfo" class="video-info-value">-- x --</div>
                            </div>
                            <div class="video-info-item">
                                <div class="video-info-label">Codec</div>
                                <div id="videoCodecInfo" class="video-info-value">--</div>
                            </div>
                            <div class="video-info-item">
                                <div class="video-info-label">Débit</div>
                                <div id="videoBitrateInfo" class="video-info-value">-- kbps</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Paramètres de compression vidéo améliorés -->
            <div class="mb-6 md:mb-8">
                <h3 class="font-bold text-gray-700 mb-3 md:mb-4 text-lg mobile-font-lg">Paramètres de compression optimisés :</h3>
                
                <!-- Nouveau : Mode de compression optimisé -->
                <div class="mb-4 md:mb-6">
                    <label class="flex items-center justify-between mb-2">
                        <span class="text-gray-700 text-sm md:text-base">Mode de compression :</span>
                        <span id="compressionModeValue" class="font-bold text-purple-600 text-sm md:text-base">Intelligent (IA)</span>
                    </label>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-2 mb-3 md:mb-4">
                        <div class="optimized-video-option active" data-mode="intelligent">
                            <div class="quality-icon bg-purple-100 text-purple-600">
                                <i class="fas fa-brain"></i>
                            </div>
                            <h4 class="font-bold text-sm md:text-base">Intelligent (IA)</h4>
                            <p class="text-xs md:text-sm text-gray-500 mt-1">Analyse et optimise</p>
                        </div>
                        
                        <div class="optimized-video-option" data-mode="balanced">
                            <div class="quality-icon bg-blue-100 text-blue-600">
                                <i class="fas fa-balance-scale"></i>
                            </div>
                            <h4 class="font-bold text-sm md:text-base">Équilibré</h4>
                            <p class="text-xs md:text-sm text-gray-500 mt-1">Qualité/Taille optimale</p>
                        </div>
                        
                        <div class="optimized-video-option" data-mode="extreme">
                            <div class="quality-icon bg-red-100 text-red-600">
                                <i class="fas fa-compress-arrows-alt"></i>
                            </div>
                            <h4 class="font-bold text-sm md:text-base">Extrême</h4>
                            <p class="text-xs md:text-sm text-gray-500 mt-1">Taille minimale</p>
                        </div>
                    </div>
                </div>
                
                <!-- Qualité vidéo améliorée -->
                <div class="mb-4 md:mb-6">
                    <label class="flex items-center justify-between mb-2">
                        <span class="text-gray-700 text-sm md:text-base">Qualité vidéo :</span>
                        <span id="videoQualityValue" class="font-bold text-purple-600 text-sm md:text-base">Haute (recommandé)</span>
                    </label>
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-2 mb-3 md:mb-4">
                        <div class="video-quality-option" data-quality="low">
                            <div class="video-quality-icon bg-red-100 text-red-600">
                                <i class="fas fa-battery-quarter"></i>
                            </div>
                            <h4 class="font-bold text-sm md:text-base">Faible</h4>
                            <p class="text-xs md:text-sm text-gray-500 mt-1">Taille minimale</p>
                            <p class="text-xs text-purple-500 mt-1">90% réduction</p>
                        </div>
                        
                        <div class="video-quality-option" data-quality="medium">
                            <div class="video-quality-icon bg-yellow-100 text-yellow-600">
                                <i class="fas fa-battery-half"></i>
                            </div>
                            <h4 class="font-bold text-sm md:text-base">Moyenne</h4>
                            <p class="text-xs md:text-sm text-gray-500 mt-1">Équilibre parfait</p>
                            <p class="text-xs text-purple-500 mt-1">70% réduction</p>
                        </div>
                        
                        <div class="video-quality-option active" data-quality="high">
                            <div class="video-quality-icon bg-green-100 text-green-600">
                                <i class="fas fa-battery-three-quarters"></i>
                            </div>
                            <h4 class="font-bold text-sm md:text-base">Haute</h4>
                            <p class="text-xs md:text-sm text-gray-500 mt-1">Qualité optimale</p>
                            <p class="text-xs text-purple-500 mt-1">50% réduction</p>
                        </div>
                        
                        <div class="video-quality-option" data-quality="very-high">
                            <div class="video-quality-icon bg-blue-100 text-blue-600">
                                <i class="fas fa-battery-full"></i>
                            </div>
                            <h4 class="font-bold text-sm md:text-base">Très haute</h4>
                            <p class="text-xs md:text-sm text-gray-500 mt-1">Qualité maximale</p>
                            <p class="text-xs text-purple-500 mt-1">30% réduction</p>
                        </div>
                    </div>
                </div>
                
                <!-- Résolution améliorée avec détection automatique -->
                <div class="mb-4 md:mb-6">
                    <label class="flex items-center justify-between mb-2">
                        <span class="text-gray-700 text-sm md:text-base">Résolution :</span>
                        <span id="videoResolutionValue" class="font-bold text-purple-600 text-sm md:text-base">Adaptative (IA)</span>
                    </label>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-2 mb-3 md:mb-4">
                        <button class="resolution-option py-2 md:py-3 rounded-lg text-sm md:text-base" data-resolution="480">480p</button>
                        <button class="resolution-option py-2 md:py-3 rounded-lg text-sm md:text-base" data-resolution="720">720p</button>
                        <button class="resolution-option active py-2 md:py-3 rounded-lg text-sm md:text-base" data-resolution="adaptive">Adaptative</button>
                        <button class="resolution-option py-2 md:py-3 rounded-lg text-sm md:text-base" data-resolution="original">Originale</button>
                    </div>
                    <p class="text-xs text-purple-600 mt-1">Le mode adaptatif ajuste automatiquement la résolution selon le contenu</p>
                </div>
                
                <!-- Taux de compression intelligent -->
                <div class="mb-4 md:mb-6">
                    <label class="flex items-center justify-between mb-2">
                        <span class="text-gray-700 text-sm md:text-base">Taux de compression intelligent :</span>
                        <span id="compressionRateValue" class="font-bold text-purple-600 text-sm md:text-base">Auto (IA)</span>
                    </label>
                    <input type="range" id="compressionRateSlider" min="30" max="95" value="65" class="video-slider">
                    <div class="flex justify-between text-xs md:text-sm text-gray-500 mt-1">
                        <span>Haute compression</span>
                        <span>Bonne qualité</span>
                    </div>
                    <div class="flex justify-between mt-2">
                        <button id="autoOptimizeBtn" class="text-xs bg-purple-100 text-purple-700 px-3 py-1 rounded">Optimisation auto</button>
                        <button id="resetCompressionBtn" class="text-xs bg-gray-100 text-gray-700 px-3 py-1 rounded">Réinitialiser</button>
                    </div>
                </div>
                
                <!-- Format de sortie amélioré -->
                <div class="mb-4 md:mb-6">
                    <label class="block text-gray-700 mb-2 text-sm md:text-base">Format de sortie :</label>
                    <div class="video-options">
                        <div class="video-option active" data-format="mp4">
                            <i class="fas fa-file-video mb-2"></i>
                            <p class="text-xs md:text-sm">MP4</p>
                            <p class="text-xs text-purple-500">Recommandé</p>
                        </div>
                        <div class="video-option" data-format="webm">
                            <i class="fas fa-globe mb-2"></i>
                            <p class="text-xs md:text-sm">WebM</p>
                            <p class="text-xs text-purple-500">Pour web</p>
                        </div>
                        <div class="video-option" data-format="hevc">
                            <i class="fas fa-file-video mb-2"></i>
                            <p class="text-xs md:text-sm">HEVC</p>
                            <p class="text-xs text-purple-500">Haute efficacité</p>
                        </div>
                        <div class="video-option" data-format="original">
                            <i class="fas fa-sync-alt mb-2"></i>
                            <p class="text-xs md:text-sm">Original</p>
                            <p class="text-xs text-purple-500">Même format</p>
                        </div>
                    </div>
                </div>
                
                <!-- Options avancées améliorées -->
                <div class="mb-4 md:mb-6">
                    <h4 class="font-bold text-gray-700 mb-3 text-sm md:text-base">Optimisations avancées :</h4>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-4">
                        <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                            <div class="flex items-center">
                                <i class="fas fa-volume-up text-purple-500 mr-2 md:mr-3"></i>
                                <div>
                                    <p class="font-medium text-gray-800 text-sm md:text-base">Compression audio</p>
                                    <p class="text-xs md:text-sm text-gray-500">AAC 128kbps</p>
                                </div>
                            </div>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" id="audioOptimizationOption" class="sr-only peer" checked>
                                <div class="w-10 h-5 md:w-11 md:h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 md:after:h-5 md:after:w-5 after:transition-all peer-checked:bg-purple-600"></div>
                            </label>
                        </div>
                        
                        <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                            <div class="flex items-center">
                                <i class="fas fa-tachometer-alt text-purple-500 mr-2 md:mr-3"></i>
                                <div>
                                    <p class="font-medium text-gray-800 text-sm md:text-base">FPS adaptatif</p>
                                    <p class="text-xs md:text-sm text-gray-500">Optimise images/seconde</p>
                                </div>
                            </div>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" id="fpsAdaptiveOption" class="sr-only peer" checked>
                                <div class="w-10 h-5 md:w-11 md:h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 md:after:h-5 md:after:w-5 after:transition-all peer-checked:bg-purple-600"></div>
                            </label>
                        </div>
                    </div>
                    
                    <!-- Options supplémentaires -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-4 mt-3">
                        <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                            <div class="flex items-center">
                                <i class="fas fa-filter text-purple-500 mr-2 md:mr-3"></i>
                                <div>
                                    <p class="font-medium text-gray-800 text-sm md:text-base">Nettoyage bruit</p>
                                    <p class="text-xs md:text-sm text-gray-500">Réduction du bruit vidéo</p>
                                </div>
                            </div>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" id="noiseReductionOption" class="sr-only peer">
                                <div class="w-10 h-5 md:w-11 md:h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 md:after:h-5 md:after:w-5 after:transition-all peer-checked:bg-purple-600"></div>
                            </label>
                        </div>
                        
                        <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                            <div class="flex items-center">
                                <i class="fas fa-sun text-purple-500 mr-2 md:mr-3"></i>
                                <div>
                                    <p class="font-medium text-gray-800 text-sm md:text-base">Correction luminosité</p>
                                    <p class="text-xs md:text-sm text-gray-500">Ajuste automatiquement</p>
                                </div>
                            </div>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" id="brightnessCorrectionOption" class="sr-only peer">
                                <div class="w-10 h-5 md:w-11 md:h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 md:after:h-5 md:after:w-5 after:transition-all peer-checked:bg-purple-600"></div>
                            </label>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Estimation temps de compression améliorée -->
            <div id="compressionEstimation" class="mb-6 md:mb-8 hidden">
                <div class="estimated-time">
                    <i class="fas fa-clock"></i>
                    <span id="estimatedTime">Temps estimé : Calcul en cours...</span>
                </div>
                <div class="mt-2 text-sm text-purple-600">
                    <i class="fas fa-info-circle mr-1"></i>
                    <span id="compressionTips">Le mode intelligent optimise le temps de compression</span>
                </div>
            </div>
            
            <!-- Bouton de compression vidéo amélioré -->
            <div class="text-center">
                <button id="compressVideoBtn" class="video-btn px-8 md:px-10 py-3 md:py-4 text-base md:text-lg font-bold disabled:opacity-50 w-full mobile-btn" disabled>
                    <i class="fas fa-compress-alt mr-2"></i>
                    <span id="compressVideoBtnText">Compresser la vidéo (IA)</span>
                    <span id="compressingVideoText" class="hidden">
                        <div class="video-loader mx-auto"></div>
                    </span>
                </button>
                
                <!-- Barre de progression améliorée -->
                <div id="videoProgress" class="mt-3 md:mt-4 hidden">
                    <div class="flex justify-between mb-1">
                        <span class="text-sm font-medium text-purple-700">Compression IA en cours...</span>
                        <span id="videoProgressPercent" class="text-sm font-medium text-purple-700">0%</span>
                    </div>
                    <div class="progress-bar-container">
                        <div id="videoProgressBar" class="video-progress-bar-large" style="width: 0%"></div>
                    </div>
                    <p class="text-xs text-purple-600 mt-2" id="compressionStatus">Initialisation de la compression IA...</p>
                    
                    <!-- Progression par morceaux améliorée -->
                    <div id="chunkProgressContainer" class="chunk-progress-container hidden">
                        <div class="chunk-progress-label">
                            <span>Compression par segments IA</span>
                            <span id="chunkProgressText">Segment 1/5</span>
                        </div>
                        <div class="progress-bar-container">
                            <div id="chunkProgressBar" class="video-progress-bar" style="width: 0%"></div>
                        </div>
                    </div>
                    
                    <!-- Informations de progression en temps réel -->
                    <div id="progressInfo" class="mt-3 text-xs text-gray-600 hidden">
                        <div class="grid grid-cols-2 gap-2">
                            <div>
                                <i class="fas fa-microchip mr-1"></i>
                                <span id="cpuUsage">CPU: 45%</span>
                            </div>
                            <div>
                                <i class="fas fa-memory mr-1"></i>
                                <span id="memoryUsage">Mémoire: 320MB</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Résultats de compression vidéo améliorés -->
            <div id="videoResults" class="mt-6 md:mt-8 hidden">
                <div class="flex flex-col md:flex-row md:items-center justify-between mb-4 md:mb-6 mobile-space-y-2">
                    <div class="flex items-center justify-center md:justify-start mb-2 md:mb-0">
                        <div class="video-result-badge px-3 md:px-4 py-1 md:py-2 rounded-full flex items-center text-sm md:text-base">
                            <i class="fas fa-check mr-2"></i>
                            Compression IA réussie !
                        </div>
                    </div>
                    <div class="text-purple-600 font-bold text-center md:text-right text-sm md:text-base">
                        <i class="fas fa-clock mr-1"></i>
                        <span id="compressionVideoTime">0</span>s
                        <span class="text-xs ml-1">(optimisé)</span>
                    </div>
                </div>
                
                <!-- Comparaison améliorée -->
                <div class="mb-4 md:mb-6">
                    <h4 class="font-bold text-gray-700 mb-2 md:mb-3 text-sm md:text-base">Comparaison :</h4>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6">
                        <div class="text-center">
                            <div class="video-preview-container rounded-xl overflow-hidden p-3 md:p-4 mb-2">
                                <video id="finalOriginalVideo" class="preview-video mx-auto" controls>
                                    Votre navigateur ne supporte pas la lecture de vidéos.
                                </video>
                            </div>
                            <p class="text-sm text-gray-600">Original</p>
                            <p id="finalOriginalVideoSize" class="text-xs text-gray-500"></p>
                        </div>
                        <div class="text-center">
                            <div class="video-preview-container rounded-xl overflow-hidden p-3 md:p-4 mb-2">
                                <video id="finalCompressedVideo" class="preview-video mx-auto" controls>
                                    Votre navigateur ne supporte pas la lecture de vidéos.
                                </video>
                            </div>
                            <p class="text-sm text-gray-600">Compressé (IA)</p>
                            <p id="finalCompressedVideoSize" class="text-xs text-gray-500"></p>
                        </div>
                    </div>
                </div>
                
                <!-- Statistiques améliorées -->
                <div class="grid grid-cols-1 xs:grid-cols-4 gap-3 md:gap-4 mb-4 md:mb-6">
                    <div class="bg-purple-50 rounded-lg p-3 md:p-4 text-center">
                        <p class="text-xs md:text-sm text-gray-600">Taille originale</p>
                        <p id="finalOriginalVideoSizeStat" class="text-lg md:text-xl font-bold text-purple-600 mobile-font-lg">-- MB</p>
                    </div>
                    <div class="bg-green-50 rounded-lg p-3 md:p-4 text-center">
                        <p class="text-xs md:text-sm text-gray-600">Taille compressée</p>
                        <p id="finalCompressedVideoSizeStat" class="text-lg md:text-xl font-bold text-green-600 mobile-font-lg">-- MB</p>
                    </div>
                    <div class="bg-blue-50 rounded-lg p-3 md:p-4 text-center">
                        <p class="text-xs md:text-sm text-gray-600">Économie</p>
                        <p id="videoCompressionSavings" class="text-lg md:text-xl font-bold text-blue-600 mobile-font-lg">-- %</p>
                    </div>
                    <div class="bg-yellow-50 rounded-lg p-3 md:p-4 text-center">
                        <p class="text-xs md:text-sm text-gray-600">Qualité préservée</p>
                        <p id="qualityPreserved" class="text-lg md:text-xl font-bold text-yellow-600 mobile-font-lg">-- %</p>
                    </div>
                </div>
                
                <!-- Informations détaillées améliorées -->
                <div class="bg-gray-50 rounded-lg p-4 md:p-6 mb-4 md:mb-6">
                    <h4 class="font-bold text-gray-700 mb-3 text-sm md:text-base">Analyse détaillée IA :</h4>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-3 md:gap-4">
                        <div>
                            <p class="text-xs md:text-sm text-gray-600">Résolution originale</p>
                            <p id="originalVideoResolution" class="font-medium text-gray-800 text-sm md:text-base">--</p>
                        </div>
                        <div>
                            <p class="text-xs md:text-sm text-gray-600">Résolution optimisée</p>
                            <p id="compressedVideoResolution" class="font-medium text-gray-800 text-sm md:text-base">--</p>
                        </div>
                        <div>
                            <p class="text-xs md:text-sm text-gray-600">Mode IA utilisé</p>
                            <p id="aiModeUsed" class="font-medium text-gray-800 text-sm md:text-base">Intelligent</p>
                        </div>
                        <div>
                            <p class="text-xs md:text-sm text-gray-600">Codec vidéo</p>
                            <p id="videoCodecResult" class="font-medium text-gray-800 text-sm md:text-base">H.264/HEVC</p>
                        </div>
                        <div>
                            <p class="text-xs md:text-sm text-gray-600">Débit vidéo</p>
                            <p id="videoBitrateResult" class="font-medium text-gray-800 text-sm md:text-base">-- kbps</p>
                        </div>
                        <div>
                            <p class="text-xs md:text-sm text-gray-600">Compression appliquée</p>
                            <p id="compressionApplied" class="font-medium text-gray-800 text-sm md:text-base">-- %</p>
                        </div>
                    </div>
                </div>
                
                <!-- Actions améliorées -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                    <button id="downloadCompressedVideoBtn" class="download-btn py-3 rounded-lg flex items-center justify-center mobile-btn">
                        <i class="fas fa-download mr-2"></i>
                        Télécharger
                    </button>
                    <button id="shareCompressedVideoBtn" class="bg-green-500 hover:bg-green-600 text-white py-3 rounded-lg transition flex items-center justify-center mobile-btn">
                        <i class="fas fa-share-alt mr-2"></i>
                        Partager
                    </button>
                    <button id="newVideoCompressionBtn" class="bg-gray-500 hover:bg-gray-600 text-white py-3 rounded-lg transition flex items-center justify-center mobile-btn">
                        <i class="fas fa-redo mr-2"></i>
                        Nouvelle
                    </button>
                </div>
                
                <!-- Conseil amélioré -->
                <div class="mt-4 p-3 bg-blue-50 rounded-lg">
                    <div class="flex items-center">
                        <i class="fas fa-lightbulb text-blue-500 mr-3"></i>
                        <div>
                            <p class="text-sm text-blue-700">
                                <strong>Conseil IA :</strong> Pour des vidéos encore plus volumineuses (>5GB), notre algorithme 
                                IA utilise la compression adaptative par segments pour garantir la meilleure qualité possible.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- NOUVELLE SECTION : Compression de Fichiers -->
        <div class="file-compression-card rounded-2xl p-4 md:p-6 mb-6 md:mb-8 slide-up mobile-padding">
            <div class="flex flex-col md:flex-row md:items-center mb-4 md:mb-6 mobile-space-y-2">
                <div class="w-12 h-12 rounded-full bg-yellow-100 flex items-center justify-center text-yellow-500 mr-0 md:mr-4 mb-3 md:mb-0 mx-auto md:mx-0">
                    <i class="fas fa-file-archive text-2xl"></i>
                </div>
                <div class="text-center md:text-left">
                    <h2 class="text-xl md:text-2xl font-bold text-gray-800 mobile-font-lg">Compression de Fichiers Avancée</h2>
                    <p class="text-gray-600 text-sm md:text-base mobile-text-center md:text-left">Compressez tous types de fichiers : documents, archives, PDF, etc.</p>
                    <div class="flex flex-wrap gap-1 mt-2">
                        <span class="large-file-badge text-xs">
                            <i class="fas fa-file-pdf mr-1"></i>PDF
                        </span>
                        <span class="pro-badge text-xs">
                            <i class="fas fa-file-word mr-1"></i>DOC/DOCX
                        </span>
                        <span class="feature-badge text-xs">
                            <i class="fas fa-file-excel mr-1"></i>XLS/XLSX
                        </span>
                        <span class="new-badge text-xs">
                            <i class="fas fa-file-powerpoint mr-1"></i>PPT/PPTX
                        </span>
                    </div>
                </div>
            </div>
            
            <!-- Zone de téléchargement fichiers -->
            <div class="mb-6 md:mb-8">
                <div class="file-dropzone rounded-xl p-4 md:p-8 text-center cursor-pointer mobile-padding" id="fileDropZone">
                    <div class="py-4 md:py-8">
                        <i class="fas fa-cloud-upload-alt text-4xl md:text-5xl text-yellow-400 mb-3 md:mb-4"></i>
                        <p class="text-lg md:text-xl font-medium text-gray-700 mb-2 mobile-font-lg">Glissez vos fichiers ici</p>
                        <p class="text-gray-500 mb-4 md:mb-6 text-sm md:text-base">ou cliquez pour sélectionner un ou plusieurs fichiers</p>
                        <button id="fileUploadBtn" class="file-btn px-6 md:px-8 py-2 md:py-3 rounded-lg mobile-btn">
                            <i class="fas fa-folder-open mr-2"></i>Sélectionner des fichiers
                        </button>
                        <input type="file" id="fileInput" multiple class="hidden">
                        <p class="text-xs md:text-sm text-gray-400 mt-3 md:mt-4">Formats supportés: PDF, DOC, DOCX, XLS, XLSX, PPT, PPTX, TXT, ZIP, RAR - jusqu'à 2GB</p>
                    </div>
                </div>
                
                <!-- Liste des fichiers -->
                <div id="fileList" class="mt-4 md:mt-6 hidden">
                    <h4 class="font-bold text-gray-700 mb-3 md:mb-4 text-lg mobile-font-lg">Fichiers sélectionnés :</h4>
                    <div id="fileListContainer" class="space-y-3 max-h-60 overflow-y-auto p-2">
                        <!-- Les fichiers apparaîtront ici dynamiquement -->
                    </div>
                    <div class="mt-4 flex justify-between items-center">
                        <div class="text-sm text-gray-600">
                            <span id="totalFilesCount">0</span> fichier(s) sélectionné(s) - 
                            <span id="totalFilesSize">0 B</span>
                        </div>
                        <button id="clearFilesBtn" class="text-sm text-red-500 hover:text-red-700">
                            <i class="fas fa-times mr-1"></i>Tout effacer
                        </button>
                    </div>
                </div>
                
                <!-- Aperçu du fichier -->
                <div id="filePreview" class="mt-4 md:mt-6 hidden">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6 mobile-gap-4">
                        <div>
                            <h4 class="font-bold text-gray-700 mb-2 md:mb-3 mobile-font-lg">Fichier(s) original(aux)</h4>
                            <div id="originalFilePreview" class="file-preview">
                                <div class="text-center">
                                    <i class="fas fa-file-alt file-icon"></i>
                                    <div class="file-details">
                                        <p id="filePreviewName" class="file-name">Aucun fichier sélectionné</p>
                                        <p id="filePreviewSize" class="file-meta">--</p>
                                        <p id="filePreviewType" class="file-meta">--</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div>
                            <h4 class="font-bold text-gray-700 mb-2 md:mb-3 mobile-font-lg">Fichier(s) compressé(s)</h4>
                            <div id="compressedFilePreview" class="file-preview">
                                <div class="text-center">
                                    <i class="fas fa-file-archive file-icon"></i>
                                    <div class="file-details">
                                        <p id="compressedFilePreviewName" class="file-name">Archive compressée</p>
                                        <p id="compressedFilePreviewSize" class="file-meta">--</p>
                                        <p id="compressedFilePreviewType" class="file-meta">ZIP</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Options de compression de fichiers -->
            <div class="mb-6 md:mb-8">
                <h3 class="font-bold text-gray-700 mb-3 md:mb-4 text-lg mobile-font-lg">Options de compression :</h3>
                
                <!-- Type de compression -->
                <div class="mb-4 md:mb-6">
                    <label class="flex items-center justify-between mb-2">
                        <span class="text-gray-700 text-sm md:text-base">Type de compression :</span>
                        <span id="fileCompressionTypeValue" class="font-bold text-yellow-600 text-sm md:text-base">ZIP (recommandé)</span>
                    </label>
                    <div class="archive-options">
                        <div class="archive-option active" data-archive="zip">
                            <div class="archive-icon">
                                <i class="fas fa-file-archive"></i>
                            </div>
                            <h4 class="font-bold text-xs md:text-sm">ZIP</h4>
                            <p class="text-xs text-gray-500">Universel</p>
                        </div>
                        
                        <div class="archive-option" data-archive="7z">
                            <div class="archive-icon">
                                <i class="fas fa-compress-arrows-alt"></i>
                            </div>
                            <h4 class="font-bold text-xs md:text-sm">7Z</h4>
                            <p class="text-xs text-gray-500">Haute compression</p>
                        </div>
                        
                        <div class="archive-option" data-archive="rar">
                            <div class="archive-icon">
                                <i class="fas fa-box"></i>
                            </div>
                            <h4 class="font-bold text-xs md:text-sm">RAR</h4>
                            <p class="text-xs text-gray-500">Robuste</p>
                        </div>
                    </div>
                </div>
                
                <!-- Niveau de compression -->
                <div class="mb-4 md:mb-6">
                    <label class="flex items-center justify-between mb-2">
                        <span class="text-gray-700 text-sm md:text-base">Niveau de compression :</span>
                        <span id="fileCompressionLevelValue" class="font-bold text-yellow-600 text-sm md:text-base">Normal</span>
                    </label>
                    <input type="range" id="fileCompressionLevelSlider" min="1" max="9" value="5" class="file-slider">
                    <div class="flex justify-between text-xs md:text-sm text-gray-500 mt-1">
                        <span>Rapide</span>
                        <span>Maximum</span>
                    </div>
                    <div class="flex justify-between mt-2">
                        <span class="compression-level level-low">Faible</span>
                        <span class="compression-level level-medium active">Normal</span>
                        <span class="compression-level level-high">Élevé</span>
                    </div>
                </div>
                
                <!-- Options de fichiers -->
                <div class="mb-4 md:mb-6">
                    <label class="block text-gray-700 mb-2 text-sm md:text-base">Options :</label>
                    <div class="file-options">
                        <div class="file-option active" data-option="single-archive">
                            <i class="fas fa-box mb-2"></i>
                            <p class="text-xs md:text-sm">Archive unique</p>
                            <p class="text-xs text-yellow-500">Recommandé</p>
                        </div>
                        <div class="file-option" data-option="split-archive">
                            <i class="fas fa-copy mb-2"></i>
                            <p class="text-xs md:text-sm">Archives multiples</p>
                            <p class="text-xs text-yellow-500">Pour gros fichiers</p>
                        </div>
                        <div class="file-option" data-option="encrypt">
                            <i class="fas fa-lock mb-2"></i>
                            <p class="text-xs md:text-sm">Chiffrement</p>
                            <p class="text-xs text-yellow-500">Sécurisé</p>
                        </div>
                        <div class="file-option" data-option="compress-each">
                            <i class="fas fa-file-archive mb-2"></i>
                            <p class="text-xs md:text-sm">Compresser chaque fichier</p>
                            <p class="text-xs text-yellow-500">Individuel</p>
                        </div>
                    </div>
                </div>
                
                <!-- Options avancées -->
                <div class="mb-4 md:mb-6">
                    <h4 class="font-bold text-gray-700 mb-3 text-sm md:text-base">Options avancées :</h4>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-4">
                        <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                            <div class="flex items-center">
                                <i class="fas fa-key text-yellow-500 mr-2 md:mr-3"></i>
                                <div>
                                    <p class="font-medium text-gray-800 text-sm md:text-base">Chiffrer l'archive</p>
                                    <p class="text-xs md:text-sm text-gray-500">Mot de passe requis</p>
                                </div>
                            </div>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" id="encryptArchiveOption" class="sr-only peer">
                                <div class="w-10 h-5 md:w-11 md:h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-yellow-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 md:after:h-5 md:after:w-5 after:transition-all peer-checked:bg-yellow-600"></div>
                            </label>
                        </div>
                        
                        <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                            <div class="flex items-center">
                                <i class="fas fa-save text-yellow-500 mr-2 md:mr-3"></i>
                                <div>
                                    <p class="font-medium text-gray-800 text-sm md:text-base">Compression récursive</p>
                                    <p class="text-xs md:text-sm text-gray-500">Inclure les sous-dossiers</p>
                                </div>
                            </div>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" id="recursiveCompressionOption" class="sr-only peer" checked>
                                <div class="w-10 h-5 md:w-11 md:h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-yellow-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 md:after:h-5 md:after:w-5 after:transition-all peer-checked:bg-yellow-600"></div>
                            </label>
                        </div>
                    </div>
                    
                    <!-- Champ mot de passe (conditionnel) -->
                    <div id="passwordField" class="mt-4 hidden">
                        <label class="block text-gray-700 mb-2 text-sm md:text-base">Mot de passe :</label>
                        <div class="relative">
                            <input type="password" id="archivePassword" class="w-full p-3 border border-gray-300 rounded-lg" placeholder="Entrez un mot de passe sécurisé">
                            <button type="button" id="togglePassword" class="absolute right-3 top-3 text-gray-500">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                        <p class="text-xs text-gray-500 mt-1">Le mot de passe est requis pour décompresser l'archive</p>
                    </div>
                </div>
            </div>
            
            <!-- Estimation compression fichiers -->
            <div id="fileCompressionEstimation" class="mb-6 md:mb-8 hidden">
                <div class="estimated-time" style="background: #F59E0B;">
                    <i class="fas fa-clock"></i>
                    <span id="fileEstimatedTime">Temps estimé : Calcul en cours...</span>
                </div>
                <div class="file-info-grid mt-3">
                    <div class="file-info-item">
                        <div class="file-info-label">Fichiers</div>
                        <div id="fileCountInfo" class="file-info-value">0</div>
                    </div>
                    <div class="file-info-item">
                        <div class="file-info-label">Taille totale</div>
                        <div id="fileTotalSizeInfo" class="file-info-value">0 B</div>
                    </div>
                    <div class="file-info-item">
                        <div class="file-info-label">Compression estimée</div>
                        <div id="fileCompressionEstimate" class="file-info-value">-- %</div>
                    </div>
                    <div class="file-info-item">
                        <div class="file-info-label">Taille estimée</div>
                        <div id="fileEstimatedSize" class="file-info-value">-- B</div>
                    </div>
                </div>
            </div>
            
            <!-- Bouton de compression fichiers -->
            <div class="text-center">
                <button id="compressFileBtn" class="file-btn px-8 md:px-10 py-3 md:py-4 text-base md:text-lg font-bold disabled:opacity-50 w-full mobile-btn" disabled>
                    <i class="fas fa-file-archive mr-2"></i>
                    <span id="compressFileBtnText">Compresser les fichiers</span>
                    <span id="compressingFileText" class="hidden">
                        <div class="file-loader mx-auto"></div>
                    </span>
                </button>
                
                <!-- Barre de progression fichiers -->
                <div id="fileProgress" class="mt-3 md:mt-4 hidden">
                    <div class="flex justify-between mb-1">
                        <span class="text-sm font-medium text-yellow-700">Compression en cours...</span>
                        <span id="fileProgressPercent" class="text-sm font-medium text-yellow-700">0%</span>
                    </div>
                    <div class="progress-bar-container">
                        <div id="fileProgressBar" class="file-progress-bar" style="width: 0%"></div>
                    </div>
                    <p class="text-xs text-yellow-600 mt-2" id="fileCompressionStatus">Préparation de la compression...</p>
                    
                    <!-- Progression par fichier -->
                    <div id="fileProgressDetails" class="mt-3 hidden">
                        <div class="chunk-progress-label">
                            <span id="currentFileName">Fichier : --</span>
                            <span id="fileProgressText">0/0</span>
                        </div>
                        <div class="progress-bar-container">
                            <div id="fileDetailProgressBar" class="file-progress-bar" style="width: 0%"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Résultats de compression fichiers -->
            <div id="fileResults" class="mt-6 md:mt-8 hidden">
                <div class="flex flex-col md:flex-row md:items-center justify-between mb-4 md:mb-6 mobile-space-y-2">
                    <div class="flex items-center justify-center md:justify-start mb-2 md:mb-0">
                        <div class="file-result-badge px-3 md:px-4 py-1 md:py-2 rounded-full flex items-center text-sm md:text-base">
                            <i class="fas fa-check mr-2"></i>
                            Compression réussie !
                        </div>
                    </div>
                    <div class="text-yellow-600 font-bold text-center md:text-right text-sm md:text-base">
                        <i class="fas fa-clock mr-1"></i>
                        <span id="fileCompressionTime">0</span>s
                    </div>
                </div>
                
                <!-- Comparaison -->
                <div class="mb-4 md:mb-6">
                    <h4 class="font-bold text-gray-700 mb-2 md:mb-3 text-sm md:text-base">Résultats :</h4>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6">
                        <div class="text-center">
                            <div class="file-preview p-4 md:p-6">
                                <i class="fas fa-folder-open text-4xl text-yellow-500 mb-3"></i>
                                <h5 class="font-bold text-gray-800 mb-2">Fichiers originaux</h5>
                                <p id="finalOriginalFileCount" class="text-sm text-gray-600">0 fichiers</p>
                                <p id="finalOriginalFileSize" class="text-lg font-bold text-yellow-600 mobile-font-lg">-- MB</p>
                            </div>
                        </div>
                        <div class="text-center">
                            <div class="file-preview p-4 md:p-6">
                                <i class="fas fa-file-archive text-4xl text-green-500 mb-3"></i>
                                <h5 class="font-bold text-gray-800 mb-2">Archive compressée</h5>
                                <p id="finalCompressedFileCount" class="text-sm text-gray-600">1 archive</p>
                                <p id="finalCompressedFileSize" class="text-lg font-bold text-green-600 mobile-font-lg">-- MB</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Statistiques -->
                <div class="grid grid-cols-1 xs:grid-cols-3 gap-3 md:gap-4 mb-4 md:mb-6">
                    <div class="bg-yellow-50 rounded-lg p-3 md:p-4 text-center">
                        <p class="text-xs md:text-sm text-gray-600">Taille originale</p>
                        <p id="finalOriginalFileSizeStat" class="text-lg md:text-xl font-bold text-yellow-600 mobile-font-lg">-- MB</p>
                    </div>
                    <div class="bg-green-50 rounded-lg p-3 md:p-4 text-center">
                        <p class="text-xs md:text-sm text-gray-600">Taille compressée</p>
                        <p id="finalCompressedFileSizeStat" class="text-lg md:text-xl font-bold text-green-600 mobile-font-lg">-- MB</p>
                    </div>
                    <div class="bg-blue-50 rounded-lg p-3 md:p-4 text-center">
                        <p class="text-xs md:text-sm text-gray-600">Économie</p>
                        <p id="fileCompressionSavings" class="text-lg md:text-xl font-bold text-blue-600 mobile-font-lg">-- %</p>
                    </div>
                </div>
                
                <!-- Informations détaillées -->
                <div class="bg-gray-50 rounded-lg p-4 md:p-6 mb-4 md:mb-6">
                    <h4 class="font-bold text-gray-700 mb-3 text-sm md:text-base">Informations de l'archive :</h4>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-4">
                        <div>
                            <p class="text-xs md:text-sm text-gray-600">Format d'archive</p>
                            <p id="archiveFormat" class="font-medium text-gray-800 text-sm md:text-base">ZIP</p>
                        </div>
                        <div>
                            <p class="text-xs md:text-sm text-gray-600">Niveau de compression</p>
                            <p id="archiveCompressionLevel" class="font-medium text-gray-800 text-sm md:text-base">Normal</p>
                        </div>
                        <div>
                            <p class="text-xs md:text-sm text-gray-600">Fichiers inclus</p>
                            <p id="archiveFileCount" class="font-medium text-gray-800 text-sm md:text-base">0</p>
                        </div>
                        <div>
                            <p class="text-xs md:text-sm text-gray-600">Chiffrement</p>
                            <p id="archiveEncryption" class="font-medium text-gray-800 text-sm md:text-base">Non</p>
                        </div>
                    </div>
                </div>
                
                <!-- Actions -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                    <button id="downloadCompressedFileBtn" class="download-btn py-3 rounded-lg flex items-center justify-center mobile-btn">
                        <i class="fas fa-download mr-2"></i>
                        Télécharger
                    </button>
                    <button id="shareArchiveBtn" class="bg-green-500 hover:bg-green-600 text-white py-3 rounded-lg transition flex items-center justify-center mobile-btn">
                        <i class="fas fa-share-alt mr-2"></i>
                        Partager
                    </button>
                    <button id="newFileCompressionBtn" class="bg-gray-500 hover:bg-gray-600 text-white py-3 rounded-lg transition flex items-center justify-center mobile-btn">
                        <i class="fas fa-redo mr-2"></i>
                        Nouvelle
                    </button>
                </div>
                
                <!-- Conseil -->
                <div class="mt-4 p-3 bg-yellow-50 rounded-lg">
                    <div class="flex items-center">
                        <i class="fas fa-lightbulb text-yellow-500 mr-3"></i>
                        <div>
                            <p class="text-sm text-yellow-700">
                                <strong>Conseil :</strong> Pour une meilleure compression, regroupez des fichiers similaires 
                                (tous les documents, toutes les images, etc.) dans la même archive.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Section Statistiques -->
        <div class="bg-white rounded-2xl p-4 md:p-6 mb-6 md:mb-8 slide-up mobile-padding">
            <h2 class="text-xl md:text-2xl font-bold text-gray-800 mb-4 md:mb-6 mobile-font-lg">Statistiques Globales</h2>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                <div class="stats-card">
                    <i class="fas fa-compress-alt text-2xl text-blue-500 mb-2"></i>
                    <p class="stats-label">Images compressées</p>
                    <p id="totalImagesCompressed" class="stats-value text-blue-600">0</p>
                </div>
                <div class="stats-card">
                    <i class="fas fa-video text-2xl text-purple-500 mb-2"></i>
                    <p class="stats-label">Vidéos compressées</p>
                    <p id="totalVideosCompressed" class="stats-value text-purple-600">0</p>
                </div>
                <div class="stats-card">
                    <i class="fas fa-file-archive text-2xl text-yellow-500 mb-2"></i>
                    <p class="stats-label">Fichiers compressés</p>
                    <p id="totalFilesCompressed" class="stats-value text-yellow-600">0</p>
                </div>
                <div class="stats-card">
                    <i class="fas fa-chart-line text-2xl text-green-500 mb-2"></i>
                    <p class="stats-label">Économie totale</p>
                    <p id="totalSavings" class="stats-value text-green-600">0 MB</p>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-6 md:py-8">
        <div class="container mx-auto px-4 md:px-6">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="mb-4 md:mb-0">
                    <div class="flex items-center">
                        <img src="SARAH AI.jpg" alt="Sarah IA" class="w-10 h-10 rounded-full border-2 border-white mr-3">
                        <div>
                            <h3 class="text-lg font-bold">Sarah IA</h3>
                            <p class="text-gray-300 text-sm">Design AI Pro - Compression Intelligente</p>
                        </div>
                    </div>
                </div>
                <div class="text-center md:text-right">
                    <p class="text-gray-300 text-sm">© 2026 Sarah IA. Tous droits réservés.</p>
                    <p class="text-gray-400 text-xs mt-1">Optimisé pour Chrome, Firefox, Safari et Edge</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Modal pour prévisualisation -->
    <div id="previewModal" class="fixed inset-0 bg-black/70 z-50 hidden items-center justify-center px-4">
        <div class="bg-white rounded-2xl p-4 md:p-6 max-w-4xl w-full max-h-[90vh] overflow-auto">
            <div class="flex justify-between items-center mb-4 md:mb-6">
                <h3 class="text-xl md:text-2xl font-bold text-gray-800">Prévisualisation</h3>
                <button id="closePreviewBtn" class="text-gray-400 hover:text-gray-600">
                    <i class="fas fa-times text-2xl"></i>
                </button>
            </div>
            <div id="modalPreviewContent" class="text-center">
                <div class="h-48 md:h-64 flex items-center justify-center">
                    <div class="text-center">
                        <i class="fas fa-image text-3xl md:text-4xl text-gray-300 mb-4"></i>
                        <p class="text-gray-400">Aucune image à prévisualiser</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal pour partage -->
    <div id="shareModal" class="fixed inset-0 bg-black/70 z-50 hidden items-center justify-center px-4">
        <div class="bg-white rounded-2xl p-4 md:p-6 max-w-md w-full">
            <div class="flex justify-between items-center mb-4 md:mb-6">
                <h3 class="text-xl md:text-2xl font-bold text-gray-800">Partager</h3>
                <button id="closeShareModalBtn" class="text-gray-400 hover:text-gray-600">
                    <i class="fas fa-times text-2xl"></i>
                </button>
            </div>
            <div class="space-y-4">
                <div class="flex space-x-2">
                    <button class="flex-1 bg-blue-500 hover:bg-blue-600 text-white py-2 rounded-lg flex items-center justify-center">
                        <i class="fab fa-facebook mr-2"></i>Facebook
                    </button>
                    <button class="flex-1 bg-blue-400 hover:bg-blue-500 text-white py-2 rounded-lg flex items-center justify-center">
                        <i class="fab fa-twitter mr-2"></i>Twitter
                    </button>
                </div>
                <div class="flex space-x-2">
                    <button class="flex-1 bg-red-500 hover:bg-red-600 text-white py-2 rounded-lg flex items-center justify-center">
                        <i class="fab fa-google-drive mr-2"></i>Drive
                    </button>
                    <button class="flex-1 bg-gray-800 hover:bg-gray-900 text-white py-2 rounded-lg flex items-center justify-center">
                        <i class="fab fa-github mr-2"></i>GitHub
                    </button>
                </div>
                <div class="mt-4">
                    <label class="block text-gray-700 mb-2">Lien de partage :</label>
                    <div class="flex">
                        <input type="text" id="shareLink" class="flex-1 p-2 border border-gray-300 rounded-l-lg" readonly value="https://sarah-ai.com/compression">
                        <button id="copyShareLinkBtn" class="bg-blue-500 hover:bg-blue-600 text-white px-4 rounded-r-lg">
                            <i class="fas fa-copy"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Configuration globale améliorée
        const CONFIG = {
            REMOVE_BG_API_KEY: 'mxmBbLJ3asgRXLGLP8dBHYEP',
            REMOVE_BG_API_URL: 'https://api.remove.bg/v1.0/removebg',
            MAX_FILE_SIZE: 5 * 1024 * 1024, // 5MB pour remove.bg
            MAX_COMPRESSION_SIZE: 20 * 1024 * 1024, // 20MB pour compression
            MAX_QUALITY_SIZE: 10 * 1024 * 1024, // 10MB pour amélioration qualité
            MAX_VIDEO_SIZE: 10 * 1024 * 1024 * 1024, // 10GB pour vidéo
            MAX_FILE_COMPRESSION_SIZE: 2 * 1024 * 1024 * 1024, // 2GB pour fichiers
            CHUNK_SIZE: 100 * 1024 * 1024, // 100MB par morceau pour grandes vidéos
            STATS_KEY: 'sarah_ai_stats'
        };

        // Variables globales
        let originalImage = null;
        let compressedImage = null;
        let qualityImage = null;
        let improvedImage = null;
        let removeBgImage = null;
        let removedBgImage = null;
        let originalVideo = null;
        let compressedVideo = null;
        let selectedFiles = [];
        let compressedArchive = null;
        
        let compressionStartTime = null;
        let qualityStartTime = null;
        let removeBgStartTime = null;
        let videoStartTime = null;
        let fileStartTime = null;
        
        // Statistiques
        let stats = {
            imagesCompressed: 0,
            videosCompressed: 0,
            filesCompressed: 0,
            totalSavingsMB: 0
        };

        // Éléments DOM
        const elements = {
            // Compression
            compressionDropZone: document.getElementById('compressionDropZone'),
            compressionUploadBtn: document.getElementById('compressionUploadBtn'),
            compressionImageInput: document.getElementById('compressionImageInput'),
            compressionPreview: document.getElementById('compressionPreview'),
            originalPreviewImg: document.getElementById('originalPreviewImg'),
            compressedPreviewImg: document.getElementById('compressedPreviewImg'),
            compressImageBtn: document.getElementById('compressImageBtn'),
            compressionResults: document.getElementById('compressionResults'),
            downloadCompressedBtn: document.getElementById('downloadCompressedBtn'),
            newCompressionBtn: document.getElementById('newCompressionBtn'),
            
            // Qualité
            qualityDropZone: document.getElementById('qualityDropZone'),
            qualityUploadBtn: document.getElementById('qualityUploadBtn'),
            qualityImageInput: document.getElementById('qualityImageInput'),
            qualityPreview: document.getElementById('qualityPreview'),
            qualityOriginalPreviewImg: document.getElementById('qualityOriginalPreviewImg'),
            qualityImprovedPreviewImg: document.getElementById('qualityImprovedPreviewImg'),
            improveQualityBtn: document.getElementById('improveQualityBtn'),
            qualityResults: document.getElementById('qualityResults'),
            downloadImprovedBtn: document.getElementById('downloadImprovedBtn'),
            newQualityImprovementBtn: document.getElementById('newQualityImprovementBtn'),
            
            // Suppression arrière-plan
            removeBgDropZone: document.getElementById('removeBgDropZone'),
            removeBgUploadBtn: document.getElementById('removeBgUploadBtn'),
            removeBgImageInput: document.getElementById('removeBgImageInput'),
            removeBgPreview: document.getElementById('removeBgPreview'),
            removeBgOriginalPreviewImg: document.getElementById('removeBgOriginalPreviewImg'),
            removeBgResultPreviewImg: document.getElementById('removeBgResultPreviewImg'),
            removeBackgroundBtn: document.getElementById('removeBackgroundBtn'),
            removeBgResults: document.getElementById('removeBgResults'),
            downloadRemovedBgBtn: document.getElementById('downloadRemovedBgBtn'),
            newRemoveBgBtn: document.getElementById('newRemoveBgBtn'),
            removeBgApiStatus: document.getElementById('removeBgApiStatus'),
            
            // Vidéo
            videoDropZone: document.getElementById('videoDropZone'),
            videoUploadBtn: document.getElementById('videoUploadBtn'),
            videoInput: document.getElementById('videoInput'),
            videoPreview: document.getElementById('videoPreview'),
            originalVideoPreview: document.getElementById('originalVideoPreview'),
            compressedVideoPreview: document.getElementById('compressedVideoPreview'),
            compressVideoBtn: document.getElementById('compressVideoBtn'),
            videoResults: document.getElementById('videoResults'),
            downloadCompressedVideoBtn: document.getElementById('downloadCompressedVideoBtn'),
            newVideoCompressionBtn: document.getElementById('newVideoCompressionBtn'),
            largeFileWarning: document.getElementById('largeFileWarning'),
            compressionEstimation: document.getElementById('compressionEstimation'),
            chunkProgressContainer: document.getElementById('chunkProgressContainer'),
            autoOptimizeBtn: document.getElementById('autoOptimizeBtn'),
            resetCompressionBtn: document.getElementById('resetCompressionBtn'),
            shareCompressedVideoBtn: document.getElementById('shareCompressedVideoBtn'),
            
            // Fichiers
            fileDropZone: document.getElementById('fileDropZone'),
            fileUploadBtn: document.getElementById('fileUploadBtn'),
            fileInput: document.getElementById('fileInput'),
            fileList: document.getElementById('fileList'),
            fileListContainer: document.getElementById('fileListContainer'),
            clearFilesBtn: document.getElementById('clearFilesBtn'),
            filePreview: document.getElementById('filePreview'),
            compressFileBtn: document.getElementById('compressFileBtn'),
            fileResults: document.getElementById('fileResults'),
            downloadCompressedFileBtn: document.getElementById('downloadCompressedFileBtn'),
            newFileCompressionBtn: document.getElementById('newFileCompressionBtn'),
            shareArchiveBtn: document.getElementById('shareArchiveBtn'),
            fileCompressionEstimation: document.getElementById('fileCompressionEstimation'),
            encryptArchiveOption: document.getElementById('encryptArchiveOption'),
            passwordField: document.getElementById('passwordField'),
            archivePassword: document.getElementById('archivePassword'),
            togglePassword: document.getElementById('togglePassword'),
            
            // Modals
            previewModal: document.getElementById('previewModal'),
            closePreviewBtn: document.getElementById('closePreviewBtn'),
            modalPreviewContent: document.getElementById('modalPreviewContent'),
            shareModal: document.getElementById('shareModal'),
            closeShareModalBtn: document.getElementById('closeShareModalBtn'),
            copyShareLinkBtn: document.getElementById('copyShareLinkBtn'),
            shareLink: document.getElementById('shareLink'),
            
            // Boutons
            voiceBtn: document.getElementById('voiceBtn'),
            
            // Statistiques
            totalImagesCompressed: document.getElementById('totalImagesCompressed'),
            totalVideosCompressed: document.getElementById('totalVideosCompressed'),
            totalFilesCompressed: document.getElementById('totalFilesCompressed'),
            totalSavings: document.getElementById('totalSavings')
        };

        // Initialisation
        document.addEventListener('DOMContentLoaded', function() {
            initializeAll();
            loadStats();
        });

        // Initialisation complète
        function initializeAll() {
            initializeEventListeners();
            initializeUI();
            initializeDragAndDrop();
            testRemoveBgAPI();
            setupResponsiveFeatures();
        }

        // Initialisation des événements
        function initializeEventListeners() {
            // Compression
            elements.compressionUploadBtn.addEventListener('click', () => elements.compressionImageInput.click());
            elements.compressionImageInput.addEventListener('change', handleCompressionImageUpload);
            elements.compressImageBtn.addEventListener('click', compressImage);
            elements.downloadCompressedBtn.addEventListener('click', downloadCompressedImage);
            elements.newCompressionBtn.addEventListener('click', resetCompression);
            
            // Qualité
            elements.qualityUploadBtn.addEventListener('click', () => elements.qualityImageInput.click());
            elements.qualityImageInput.addEventListener('change', handleQualityImageUpload);
            elements.improveQualityBtn.addEventListener('click', improveImageQuality);
            elements.downloadImprovedBtn.addEventListener('click', downloadImprovedImage);
            elements.newQualityImprovementBtn.addEventListener('click', resetQualityImprovement);
            
            // Suppression arrière-plan
            elements.removeBgUploadBtn.addEventListener('click', () => elements.removeBgImageInput.click());
            elements.removeBgImageInput.addEventListener('change', handleRemoveBgImageUpload);
            elements.removeBackgroundBtn.addEventListener('click', removeBackground);
            elements.downloadRemovedBgBtn.addEventListener('click', downloadRemovedBgImage);
            elements.newRemoveBgBtn.addEventListener('click', resetRemoveBg);
            
            // Vidéo
            elements.videoUploadBtn.addEventListener('click', () => elements.videoInput.click());
            elements.videoInput.addEventListener('change', handleVideoUpload);
            elements.compressVideoBtn.addEventListener('click', compressVideo);
            elements.downloadCompressedVideoBtn.addEventListener('click', downloadCompressedVideo);
            elements.newVideoCompressionBtn.addEventListener('click', resetVideoCompression);
            elements.shareCompressedVideoBtn.addEventListener('click', () => openShareModal('vidéo'));
            elements.autoOptimizeBtn.addEventListener('click', autoOptimizeVideo);
            elements.resetCompressionBtn.addEventListener('click', resetVideoSettings);
            
            // Fichiers
            elements.fileUploadBtn.addEventListener('click', () => elements.fileInput.click());
            elements.fileInput.addEventListener('change', handleFileUpload);
            elements.clearFilesBtn.addEventListener('click', clearFileList);
            elements.compressFileBtn.addEventListener('click', compressFiles);
            elements.downloadCompressedFileBtn.addEventListener('click', downloadCompressedFile);
            elements.newFileCompressionBtn.addEventListener('click', resetFileCompression);
            elements.shareArchiveBtn.addEventListener('click', () => openShareModal('archive'));
            elements.encryptArchiveOption.addEventListener('change', togglePasswordField);
            elements.togglePassword.addEventListener('click', togglePasswordVisibility);
            
            // Options d'amélioration
            document.querySelectorAll('.enhancement-option').forEach(option => {
                option.addEventListener('click', function() {
                    document.querySelectorAll('.enhancement-option').forEach(o => o.classList.remove('active'));
                    this.classList.add('active');
                });
            });
            
            // Options qualité
            document.querySelectorAll('.quality-option').forEach(option => {
                option.addEventListener('click', function() {
                    document.querySelectorAll('.quality-option').forEach(o => o.classList.remove('active'));
                    this.classList.add('active');
                    
                    const icon = this.querySelector('.quality-icon');
                    icon.className = 'quality-icon';
                    
                    if (this.getAttribute('data-improvement') === 'upscale') {
                        icon.classList.add('bg-purple-100', 'text-purple-600');
                    } else if (this.getAttribute('data-improvement') === 'denoise') {
                        icon.classList.add('bg-blue-100', 'text-blue-600');
                    } else {
                        icon.classList.add('bg-green-100', 'text-green-600');
                    }
                });
            });
            
            // Options suppression arrière-plan
            document.querySelectorAll('.bg-removal-option').forEach(option => {
                option.addEventListener('click', function() {
                    document.querySelectorAll('.bg-removal-option').forEach(o => o.classList.remove('active'));
                    this.classList.add('active');
                });
            });
            
            // Options vidéo
            document.querySelectorAll('.video-option').forEach(option => {
                option.addEventListener('click', function() {
                    document.querySelectorAll('.video-option').forEach(o => o.classList.remove('active'));
                    this.classList.add('active');
                });
            });
            
            // Options qualité vidéo
            document.querySelectorAll('.video-quality-option').forEach(option => {
                option.addEventListener('click', function() {
                    document.querySelectorAll('.video-quality-option').forEach(o => o.classList.remove('active'));
                    this.classList.add('active');
                    updateVideoQualityValue(this.getAttribute('data-quality'));
                });
            });
            
            // Options mode vidéo optimisé
            document.querySelectorAll('.optimized-video-option').forEach(option => {
                option.addEventListener('click', function() {
                    document.querySelectorAll('.optimized-video-option').forEach(o => o.classList.remove('active'));
                    this.classList.add('active');
                    updateCompressionModeValue(this.getAttribute('data-mode'));
                });
            });
            
            // Options résolution vidéo
            document.querySelectorAll('.resolution-option').forEach(option => {
                option.addEventListener('click', function() {
                    document.querySelectorAll('.resolution-option').forEach(o => o.classList.remove('active'));
                    this.classList.add('active');
                    const res = this.getAttribute('data-resolution');
                    document.getElementById('videoResolutionValue').textContent = 
                        res === 'original' ? 'Originale' : 
                        res === 'adaptive' ? 'Adaptative (IA)' : res + 'p';
                });
            });
            
            // Options fichiers
            document.querySelectorAll('.file-option').forEach(option => {
                option.addEventListener('click', function() {
                    document.querySelectorAll('.file-option').forEach(o => o.classList.remove('active'));
                    this.classList.add('active');
                });
            });
            
            // Options archive
            document.querySelectorAll('.archive-option').forEach(option => {
                option.addEventListener('click', function() {
                    document.querySelectorAll('.archive-option').forEach(o => o.classList.remove('active'));
                    this.classList.add('active');
                    document.getElementById('fileCompressionTypeValue').textContent = 
                        this.getAttribute('data-archive').toUpperCase() + ' (recommandé)';
                });
            });
            
            // Sliders
            document.getElementById('compressionQualitySlider').addEventListener('input', function() {
                document.getElementById('compressionQualityValue').textContent = this.value + '%';
            });
            
            document.getElementById('maxWidthSlider').addEventListener('input', function() {
                document.getElementById('maxWidthValue').textContent = this.value + 'px';
            });
            
            document.getElementById('compressionRateSlider').addEventListener('input', function() {
                document.getElementById('compressionRateValue').textContent = this.value + '%';
            });
            
            document.getElementById('fileCompressionLevelSlider').addEventListener('input', function() {
                const value = parseInt(this.value);
                let level = 'Faible';
                if (value <= 3) level = 'Faible';
                else if (value <= 6) level = 'Normal';
                else level = 'Élevé';
                
                document.getElementById('fileCompressionLevelValue').textContent = level;
                
                // Mettre à jour les indicateurs visuels
                document.querySelectorAll('.compression-level').forEach(el => el.classList.remove('active'));
                if (value <= 3) document.querySelector('.compression-level.level-low').classList.add('active');
                else if (value <= 6) document.querySelector('.compression-level.level-medium').classList.add('active');
                else document.querySelector('.compression-level.level-high').classList.add('active');
            });
            
            // Facteurs d'échelle
            document.querySelectorAll('.scale-factor-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.scale-factor-btn').forEach(b => b.classList.remove('bg-purple-100'));
                    this.classList.add('bg-purple-100');
                    document.getElementById('scaleFactorValue').textContent = this.getAttribute('data-factor') + 'x';
                });
            });
            
            // Modals
            elements.closePreviewBtn.addEventListener('click', closePreviewModal);
            elements.previewModal.addEventListener('click', function(e) {
                if (e.target === elements.previewModal) {
                    closePreviewModal();
                }
            });
            
            elements.closeShareModalBtn.addEventListener('click', closeShareModal);
            elements.shareModal.addEventListener('click', function(e) {
                if (e.target === elements.shareModal) {
                    closeShareModal();
                }
            });
            
            elements.copyShareLinkBtn.addEventListener('click', copyShareLink);
            
            // Bouton vocal
            elements.voiceBtn.addEventListener('click', toggleVoiceMode);
        }

        // Initialisation de l'UI
        function initializeUI() {
            // Initialiser les valeurs par défaut
            document.getElementById('compressionQualityValue').textContent = '80%';
            document.getElementById('maxWidthValue').textContent = '1920px';
            document.getElementById('scaleFactorValue').textContent = '2x';
            document.getElementById('compressionRateValue').textContent = '65%';
            document.getElementById('videoQualityValue').textContent = 'Haute (50% réduction)';
            document.getElementById('videoResolutionValue').textContent = 'Adaptative (IA)';
            document.getElementById('compressionModeValue').textContent = 'Intelligent (IA)';
            document.getElementById('fileCompressionTypeValue').textContent = 'ZIP (recommandé)';
            document.getElementById('fileCompressionLevelValue').textContent = 'Normal';
            
            // Activer le niveau de compression moyen par défaut
            document.querySelector('.compression-level.level-medium').classList.add('active');
        }

        // Fonctionnalités responsive
        function setupResponsiveFeatures() {
            function updateResponsiveClasses() {
                const isMobile = window.innerWidth < 768;
                const isTablet = window.innerWidth >= 768 && window.innerWidth <= 1024;
                const isDesktop = window.innerWidth > 1024;
                
                // Ajouter une classe au body pour faciliter le CSS
                document.body.classList.toggle('is-mobile', isMobile);
                document.body.classList.toggle('is-tablet', isTablet);
                document.body.classList.toggle('is-desktop', isDesktop);
                
                // Ajuster les zones de drop pour mobile
                const dropZones = document.querySelectorAll('.drop-zone, .quality-dropzone, .remove-bg-dropzone, .video-dropzone, .file-dropzone');
                dropZones.forEach(zone => {
                    if (isMobile) {
                        zone.style.padding = '1.5rem';
                    } else {
                        zone.style.padding = '';
                    }
                });
                
                // Ajuster les tailles de texte pour une meilleure lisibilité
                if (isMobile) {
                    document.documentElement.style.fontSize = '14px';
                } else if (isTablet) {
                    document.documentElement.style.fontSize = '15px';
                } else {
                    document.documentElement.style.fontSize = '16px';
                }
            }
            
            // Initialiser et écouter les changements de taille
            updateResponsiveClasses();
            window.addEventListener('resize', updateResponsiveClasses);
        }

        // Initialisation du drag and drop
        function initializeDragAndDrop() {
            // Compression
            setupDragAndDrop(elements.compressionDropZone, handleCompressionImageUpload);
            
            // Qualité
            setupDragAndDrop(elements.qualityDropZone, handleQualityImageUpload);
            
            // Suppression arrière-plan
            setupDragAndDrop(elements.removeBgDropZone, handleRemoveBgImageUpload);
            
            // Vidéo
            setupDragAndDrop(elements.videoDropZone, handleVideoUpload);
            
            // Fichiers
            setupDragAndDrop(elements.fileDropZone, handleFileDrop);
        }

        // Configuration du drag and drop
        function setupDragAndDrop(dropZone, callback) {
            ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
                dropZone.addEventListener(eventName, preventDefaults, false);
            });
            
            ['dragenter', 'dragover'].forEach(eventName => {
                dropZone.addEventListener(eventName, () => dropZone.classList.add('drag-over'), false);
            });
            
            ['dragleave', 'drop'].forEach(eventName => {
                dropZone.addEventListener(eventName, () => dropZone.classList.remove('drag-over'), false);
            });
            
            dropZone.addEventListener('drop', handleDrop, false);
            
            function preventDefaults(e) {
                e.preventDefault();
                e.stopPropagation();
            }
            
            function handleDrop(e) {
                const dt = e.dataTransfer;
                const files = dt.files;
                if (files.length > 0) {
                    callback(files[0]);
                }
            }
        }

        // Test de l'API remove.bg
        async function testRemoveBgAPI() {
            try {
                elements.removeBgApiStatus.className = 'api-status loading';
                elements.removeBgApiStatus.innerHTML = '<i class="fas fa-sync-alt animate-spin mr-1"></i>Test de connexion API...';
                
                // Test simple avec une petite requête
                const response = await fetch(CONFIG.REMOVE_BG_API_URL, {
                    method: 'GET',
                    headers: {
                        'X-Api-Key': CONFIG.REMOVE_BG_API_KEY
                    }
                });
                
                if (response.status === 401 || response.status === 403) {
                    throw new Error('Clé API invalide');
                }
                
                elements.removeBgApiStatus.className = 'api-status connected';
                elements.removeBgApiStatus.innerHTML = '<i class="fas fa-check-circle mr-1"></i>API remove.bg connectée';
                
                console.log('✅ API remove.bg fonctionnelle');
            } catch (error) {
                console.error('❌ Erreur API remove.bg:', error);
                elements.removeBgApiStatus.className = 'api-status error';
                elements.removeBgApiStatus.innerHTML = '<i class="fas fa-exclamation-triangle mr-1"></i>API hors ligne - Utilisation du mode local';
                showError('API remove.bg temporairement indisponible. Utilisation du mode local.');
            }
        }

        // Gestion des images de compression
        async function handleCompressionImageUpload(event) {
            const file = event.target?.files?.[0] || event;
            
            if (!validateImage(file, 'compression')) return;
            
            originalImage = file;
            
            try {
                const imageData = await readFileAsDataURL(file);
                elements.originalPreviewImg.src = imageData;
                
                elements.originalPreviewImg.onload = function() {
                    document.getElementById('originalDimensions').textContent = 
                        `${this.naturalWidth} × ${this.naturalHeight}px`;
                };
                
                document.getElementById('originalSize').textContent = formatFileSize(file.size);
                
                // Afficher l'aperçu
                elements.compressionPreview.classList.remove('hidden');
                elements.compressionResults.classList.add('hidden');
                elements.compressImageBtn.disabled = false;
                
                // Réinitialiser
                elements.compressedPreviewImg.classList.add('hidden');
                document.getElementById('compressedPreviewPlaceholder').classList.remove('hidden');
                
            } catch (error) {
                showError('Erreur lors du chargement de l\'image: ' + error.message);
            }
        }

        // Gestion des images de qualité
        async function handleQualityImageUpload(event) {
            const file = event.target?.files?.[0] || event;
            
            if (!validateImage(file, 'quality')) return;
            
            qualityImage = file;
            
            try {
                const imageData = await readFileAsDataURL(file);
                elements.qualityOriginalPreviewImg.src = imageData;
                
                elements.qualityOriginalPreviewImg.onload = function() {
                    document.getElementById('qualityOriginalDimensions').textContent = 
                        `${this.naturalWidth} × ${this.naturalHeight}px`;
                };
                
                document.getElementById('qualityOriginalSize').textContent = formatFileSize(file.size);
                
                // Afficher l'aperçu
                elements.qualityPreview.classList.remove('hidden');
                elements.qualityResults.classList.add('hidden');
                elements.improveQualityBtn.disabled = false;
                
                // Réinitialiser
                elements.qualityImprovedPreviewImg.classList.add('hidden');
                document.getElementById('qualityImprovedPreviewPlaceholder').classList.remove('hidden');
                
            } catch (error) {
                showError('Erreur lors du chargement de l\'image: ' + error.message);
            }
        }

        // Gestion des images pour suppression d'arrière-plan
        async function handleRemoveBgImageUpload(event) {
            const file = event.target?.files?.[0] || event;
            
            if (!validateImage(file, 'removebg')) return;
            
            removeBgImage = file;
            
            try {
                const imageData = await readFileAsDataURL(file);
                elements.removeBgOriginalPreviewImg.src = imageData;
                
                elements.removeBgOriginalPreviewImg.onload = function() {
                    document.getElementById('removeBgOriginalDimensions').textContent = 
                        `${this.naturalWidth} × ${this.naturalHeight}px`;
                };
                
                document.getElementById('removeBgOriginalSize').textContent = formatFileSize(file.size);
                
                // Afficher l'aperçu
                elements.removeBgPreview.classList.remove('hidden');
                elements.removeBgResults.classList.add('hidden');
                elements.removeBackgroundBtn.disabled = false;
                
                // Réinitialiser
                elements.removeBgResultPreviewImg.classList.add('hidden');
                document.getElementById('removeBgResultPlaceholder').classList.remove('hidden');
                
            } catch (error) {
                showError('Erreur lors du chargement de l\'image: ' + error.message);
            }
        }

        // Gestion des vidéos
        async function handleVideoUpload(event) {
            const file = event.target?.files?.[0] || event;
            
            if (!validateVideo(file)) return;
            
            originalVideo = file;
            
            try {
                const videoData = await readFileAsDataURL(file);
                elements.originalVideoPreview.src = videoData;
                
                elements.originalVideoPreview.onloadedmetadata = function() {
                    const duration = Math.round(this.duration);
                    const hours = Math.floor(duration / 3600);
                    const minutes = Math.floor((duration % 3600) / 60);
                    const seconds = duration % 60;
                    
                    let durationText = '';
                    if (hours > 0) durationText += `${hours}h `;
                    if (minutes > 0) durationText += `${minutes}m `;
                    durationText += `${seconds}s`;
                    
                    document.getElementById('originalVideoInfo').textContent = 
                        `${durationText} • ${Math.round(this.videoWidth)}×${Math.round(this.videoHeight)}`;
                    
                    document.getElementById('videoDurationInfo').textContent = durationText;
                    document.getElementById('videoResolutionInfo').textContent = `${Math.round(this.videoWidth)}×${Math.round(this.videoHeight)}`;
                    
                    // Estimer le codec et le débit
                    estimateVideoInfo(file, this);
                    
                    // Estimer le temps de compression
                    estimateCompressionTime(file.size, duration);
                    
                    // Mettre à jour les conseils de compression
                    updateCompressionTips(file.size, this.videoWidth, this.videoHeight, duration);
                };
                
                const fileSize = formatFileSize(file.size);
                document.getElementById('originalVideoSize').textContent = fileSize;
                
                // Afficher l'aperçu
                elements.videoPreview.classList.remove('hidden');
                elements.videoInfoContainer.classList.remove('hidden');
                elements.compressVideoBtn.disabled = false;
                elements.compressionEstimation.classList.remove('hidden');
                
                // Vérifier si c'est un fichier volumineux
                if (file.size > 500 * 1024 * 1024) { // > 500MB
                    elements.largeFileWarning.classList.remove('hidden');
                } else {
                    elements.largeFileWarning.classList.add('hidden');
                }
                
                // Réinitialiser
                elements.compressedVideoPreview.classList.add('hidden');
                document.getElementById('compressedVideoPlaceholder').classList.remove('hidden');
                elements.videoResults.classList.add('hidden');
                
            } catch (error) {
                showError('Erreur lors du chargement de la vidéo: ' + error.message);
            }
        }

        // Gestion des fichiers
        async function handleFileUpload(event) {
            const files = Array.from(event.target.files);
            await processSelectedFiles(files);
        }

        // Gestion du drop de fichiers
        async function handleFileDrop(event) {
            const files = Array.from(event.dataTransfer.files);
            await processSelectedFiles(files);
        }

        // Traitement des fichiers sélectionnés
        async function processSelectedFiles(files) {
            // Filtrer les fichiers valides
            const validFiles = files.filter(file => validateFile(file));
            
            if (validFiles.length === 0) return;
            
            // Ajouter aux fichiers sélectionnés
            selectedFiles.push(...validFiles);
            
            // Mettre à jour l'interface
            updateFileList();
            updateFilePreview();
            updateFileEstimation();
            
            // Activer le bouton de compression
            elements.compressFileBtn.disabled = false;
            elements.fileList.classList.remove('hidden');
            elements.filePreview.classList.remove('hidden');
            elements.fileCompressionEstimation.classList.remove('hidden');
        }

        // Mettre à jour la liste des fichiers
        function updateFileList() {
            const container = elements.fileListContainer;
            container.innerHTML = '';
            
            selectedFiles.forEach((file, index) => {
                const fileElement = document.createElement('div');
                fileElement.className = 'flex items-center justify-between p-3 bg-gray-50 rounded-lg';
                fileElement.innerHTML = `
                    <div class="flex items-center">
                        <i class="fas ${getFileIcon(file.type)} text-yellow-500 mr-3"></i>
                        <div>
                            <p class="font-medium text-gray-800 text-sm truncate max-w-xs">${file.name}</p>
                            <p class="text-xs text-gray-500">${formatFileSize(file.size)}</p>
                        </div>
                    </div>
                    <button class="text-red-500 hover:text-red-700 remove-file-btn" data-index="${index}">
                        <i class="fas fa-times"></i>
                    </button>
                `;
                container.appendChild(fileElement);
            });
            
            // Ajouter les événements pour les boutons de suppression
            document.querySelectorAll('.remove-file-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const index = parseInt(this.getAttribute('data-index'));
                    removeFile(index);
                });
            });
            
            // Mettre à jour les compteurs
            document.getElementById('totalFilesCount').textContent = selectedFiles.length;
            document.getElementById('totalFilesSize').textContent = formatFileSize(
                selectedFiles.reduce((total, file) => total + file.size, 0)
            );
        }

        // Mettre à jour l'aperçu des fichiers
        function updateFilePreview() {
            if (selectedFiles.length === 0) return;
            
            const totalSize = selectedFiles.reduce((total, file) => total + file.size, 0);
            const firstFile = selectedFiles[0];
            
            // Aperçu du fichier original
            document.getElementById('filePreviewName').textContent = 
                selectedFiles.length === 1 ? firstFile.name : `${selectedFiles.length} fichiers`;
            document.getElementById('filePreviewSize').textContent = formatFileSize(totalSize);
            document.getElementById('filePreviewType').textContent = 
                selectedFiles.length === 1 ? getFileType(firstFile.type) : 'Multiple';
            
            // Mettre à jour les informations d'estimation
            document.getElementById('fileCountInfo').textContent = selectedFiles.length;
            document.getElementById('fileTotalSizeInfo').textContent = formatFileSize(totalSize);
        }

        // Mettre à jour l'estimation de compression
        function updateFileEstimation() {
            if (selectedFiles.length === 0) return;
            
            const totalSize = selectedFiles.reduce((total, file) => total + file.size, 0);
            const compressionLevel = parseInt(document.getElementById('fileCompressionLevelSlider').value);
            
            // Estimation basée sur le niveau de compression
            let compressionRatio;
            if (compressionLevel <= 3) compressionRatio = 0.8; // 20% de réduction
            else if (compressionLevel <= 6) compressionRatio = 0.6; // 40% de réduction
            else compressionRatio = 0.4; // 60% de réduction
            
            const estimatedSize = Math.round(totalSize * compressionRatio);
            const savings = ((totalSize - estimatedSize) / totalSize * 100).toFixed(1);
            
            document.getElementById('fileCompressionEstimate').textContent = savings + '%';
            document.getElementById('fileEstimatedSize').textContent = formatFileSize(estimatedSize);
            
            // Estimer le temps
            estimateFileCompressionTime(totalSize);
        }

        // Supprimer un fichier de la liste
        function removeFile(index) {
            selectedFiles.splice(index, 1);
            updateFileList();
            updateFilePreview();
            updateFileEstimation();
            
            if (selectedFiles.length === 0) {
                resetFileCompression();
            }
        }

        // Vider la liste des fichiers
        function clearFileList() {
            selectedFiles = [];
            resetFileCompression();
        }

        // Obtenir l'icône selon le type de fichier
        function getFileIcon(mimeType) {
            if (mimeType.includes('pdf')) return 'fa-file-pdf';
            if (mimeType.includes('word') || mimeType.includes('document')) return 'fa-file-word';
            if (mimeType.includes('excel') || mimeType.includes('spreadsheet')) return 'fa-file-excel';
            if (mimeType.includes('powerpoint') || mimeType.includes('presentation')) return 'fa-file-powerpoint';
            if (mimeType.includes('zip') || mimeType.includes('compressed')) return 'fa-file-archive';
            if (mimeType.includes('text')) return 'fa-file-alt';
            if (mimeType.includes('image')) return 'fa-file-image';
            return 'fa-file';
        }

        // Obtenir le type de fichier lisible
        function getFileType(mimeType) {
            if (mimeType.includes('pdf')) return 'PDF';
            if (mimeType.includes('word') || mimeType.includes('document')) return 'Document Word';
            if (mimeType.includes('excel') || mimeType.includes('spreadsheet')) return 'Feuille de calcul';
            if (mimeType.includes('powerpoint') || mimeType.includes('presentation')) return 'Présentation';
            if (mimeType.includes('zip') || mimeType.includes('compressed')) return 'Archive';
            if (mimeType.includes('text')) return 'Texte';
            return 'Fichier';
        }

        // Estimer les informations vidéo
        function estimateVideoInfo(file, videoElement) {
            const codecs = {
                'mp4': 'H.264',
                'avi': 'Xvid/DivX',
                'mov': 'H.264/ProRes',
                'mkv': 'H.264/HEVC',
                'wmv': 'WMV',
                'webm': 'VP8/VP9'
            };
            
            const extension = file.name.split('.').pop().toLowerCase();
            const codec = codecs[extension] || 'Inconnu';
            
            // Estimer le débit
            const bitrate = Math.round((file.size * 8) / (videoElement.duration * 1000));
            
            document.getElementById('videoCodecInfo').textContent = codec;
            document.getElementById('videoBitrateInfo').textContent = `${bitrate} kbps`;
        }

        // Estimer le temps de compression vidéo amélioré
        function estimateCompressionTime(fileSize, duration) {
            // Estimation basée sur la taille du fichier, la durée et la puissance de l'appareil
            let baseSpeed;
            const isMobile = window.innerWidth < 768;
            
            if (isMobile) {
                baseSpeed = 5 * 1024 * 1024; // 5MB par seconde sur mobile
            } else {
                baseSpeed = 15 * 1024 * 1024; // 15MB par seconde sur desktop
            }
            
            const estimatedSeconds = Math.round(fileSize / baseSpeed);
            
            // Ajuster selon la durée (vidéos plus longues prennent plus de temps)
            const durationFactor = Math.min(duration / 60, 3); // Maximum 3x pour les vidéos très longues
            const adjustedSeconds = Math.round(estimatedSeconds * (1 + durationFactor * 0.5));
            
            let timeText = '';
            if (adjustedSeconds < 60) {
                timeText = `${adjustedSeconds} secondes`;
            } else if (adjustedSeconds < 3600) {
                const minutes = Math.ceil(adjustedSeconds / 60);
                timeText = `${minutes} minute${minutes > 1 ? 's' : ''}`;
            } else {
                const hours = Math.ceil(adjustedSeconds / 3600);
                timeText = `${hours} heure${hours > 1 ? 's' : ''}`;
            }
            
            document.getElementById('estimatedTime').textContent = `Temps estimé : ${timeText}`;
        }

        // Mettre à jour les conseils de compression
        function updateCompressionTips(fileSize, width, height, duration) {
            const tipsElement = document.getElementById('compressionTips');
            let tips = [];
            
            if (fileSize > 500 * 1024 * 1024) {
                tips.push('Utilisation de la compression par segments pour les grandes vidéos');
            }
            
            if (width > 1920 || height > 1080) {
                tips.push('Réduction de résolution recommandée pour une meilleure compression');
            }
            
            if (duration > 300) { // Plus de 5 minutes
                tips.push('Optimisation du débit binaire pour les vidéos longues');
            }
            
            if (tips.length > 0) {
                tipsElement.textContent = 'Conseils IA : ' + tips.join(' • ');
            } else {
                tipsElement.textContent = 'Le mode intelligent optimise automatiquement la compression';
            }
        }

        // Estimer le temps de compression de fichiers
        function estimateFileCompressionTime(totalSize) {
            const compressionLevel = parseInt(document.getElementById('fileCompressionLevelSlider').value);
            const fileCount = selectedFiles.length;
            
            // Temps de base par fichier + temps par taille
            let estimatedSeconds = fileCount * 2; // 2 secondes par fichier
            estimatedSeconds += Math.round(totalSize / (10 * 1024 * 1024)); // 10MB par seconde
            
            // Ajuster selon le niveau de compression
            if (compressionLevel > 6) estimatedSeconds *= 1.5;
            
            let timeText = '';
            if (estimatedSeconds < 60) {
                timeText = `${estimatedSeconds} secondes`;
            } else if (estimatedSeconds < 3600) {
                const minutes = Math.ceil(estimatedSeconds / 60);
                timeText = `${minutes} minute${minutes > 1 ? 's' : ''}`;
            } else {
                const hours = Math.ceil(estimatedSeconds / 3600);
                timeText = `${hours} heure${hours > 1 ? 's' : ''}`;
            }
            
            document.getElementById('fileEstimatedTime').textContent = `Temps estimé : ${timeText}`;
        }

        // Mettre à jour la valeur de qualité vidéo
        function updateVideoQualityValue(quality) {
            const values = {
                'low': 'Faible (90% réduction)',
                'medium': 'Moyenne (70% réduction)',
                'high': 'Haute (50% réduction)',
                'very-high': 'Très haute (30% réduction)'
            };
            document.getElementById('videoQualityValue').textContent = values[quality] || values['high'];
            
            // Mettre à jour le slider selon la qualité
            const compressionRateSlider = document.getElementById('compressionRateSlider');
            const compressionRateValue = document.getElementById('compressionRateValue');
            
            if (quality === 'low') {
                compressionRateSlider.value = 90;
                compressionRateValue.textContent = '90%';
            } else if (quality === 'medium') {
                compressionRateSlider.value = 70;
                compressionRateValue.textContent = '70%';
            } else if (quality === 'high') {
                compressionRateSlider.value = 50;
                compressionRateValue.textContent = '50%';
            } else {
                compressionRateSlider.value = 30;
                compressionRateValue.textContent = '30%';
            }
        }

        // Mettre à jour la valeur du mode de compression
        function updateCompressionModeValue(mode) {
            const values = {
                'intelligent': 'Intelligent (IA)',
                'balanced': 'Équilibré',
                'extreme': 'Extrême'
            };
            document.getElementById('compressionModeValue').textContent = values[mode] || values['intelligent'];
        }

        // Optimisation automatique de la vidéo
        function autoOptimizeVideo() {
            if (!originalVideo) return;
            
            // Analyser la vidéo et suggérer les meilleurs paramètres
            const videoElement = elements.originalVideoPreview;
            const width = videoElement.videoWidth;
            const height = videoElement.videoHeight;
            const duration = videoElement.duration;
            const fileSize = originalVideo.size;
            
            // Déterminer le mode optimal
            let optimalMode = 'balanced';
            let optimalQuality = 'high';
            let optimalResolution = 'adaptive';
            
            if (fileSize > 500 * 1024 * 1024) { // > 500MB
                optimalMode = 'extreme';
                optimalQuality = 'medium';
            }
            
            if (width > 1920 || height > 1080) {
                optimalResolution = '720';
            }
            
            if (duration > 600) { // > 10 minutes
                optimalQuality = 'medium';
            }
            
            // Appliquer les paramètres optimaux
            document.querySelectorAll('.optimized-video-option').forEach(o => o.classList.remove('active'));
            document.querySelector(`.optimized-video-option[data-mode="${optimalMode}"]`).classList.add('active');
            updateCompressionModeValue(optimalMode);
            
            document.querySelectorAll('.video-quality-option').forEach(o => o.classList.remove('active'));
            document.querySelector(`.video-quality-option[data-quality="${optimalQuality}"]`).classList.add('active');
            updateVideoQualityValue(optimalQuality);
            
            document.querySelectorAll('.resolution-option').forEach(o => o.classList.remove('active'));
            document.querySelector(`.resolution-option[data-resolution="${optimalResolution}"]`).classList.add('active');
            document.getElementById('videoResolutionValue').textContent = 
                optimalResolution === 'adaptive' ? 'Adaptative (IA)' : optimalResolution + 'p';
            
            showSuccess('Paramètres optimisés automatiquement par IA !');
        }

        // Réinitialiser les paramètres vidéo
        function resetVideoSettings() {
            // Réinitialiser aux valeurs par défaut
            document.querySelectorAll('.optimized-video-option').forEach(o => o.classList.remove('active'));
            document.querySelector('.optimized-video-option[data-mode="intelligent"]').classList.add('active');
            updateCompressionModeValue('intelligent');
            
            document.querySelectorAll('.video-quality-option').forEach(o => o.classList.remove('active'));
            document.querySelector('.video-quality-option[data-quality="high"]').classList.add('active');
            updateVideoQualityValue('high');
            
            document.querySelectorAll('.resolution-option').forEach(o => o.classList.remove('active'));
            document.querySelector('.resolution-option[data-resolution="adaptive"]').classList.add('active');
            document.getElementById('videoResolutionValue').textContent = 'Adaptative (IA)';
            
            document.getElementById('compressionRateSlider').value = 65;
            document.getElementById('compressionRateValue').textContent = '65%';
            
            showSuccess('Paramètres vidéo réinitialisés !');
        }

        // Validation des images
        function validateImage(file, type) {
            if (!file || !file.type.match('image.*')) {
                showError('Veuillez sélectionner une image valide');
                return false;
            }
            
            const maxSize = type === 'removebg' ? CONFIG.MAX_FILE_SIZE :
                           type === 'quality' ? CONFIG.MAX_QUALITY_SIZE :
                           CONFIG.MAX_COMPRESSION_SIZE;
            
            if (file.size > maxSize) {
                const maxMB = maxSize / (1024 * 1024);
                showError(`L'image est trop volumineuse. Taille maximale: ${maxMB}MB`);
                return false;
            }
            
            return true;
        }

        // Validation des vidéos
        function validateVideo(file) {
            if (!file || !file.type.match('video.*')) {
                // Certains navigateurs ne détectent pas correctement les types MIME pour les vidéos
                // Accepter aussi les extensions connues
                const videoExtensions = ['mp4', 'avi', 'mov', 'mkv', 'wmv', 'webm', 'flv', 'm4v'];
                const extension = file.name.split('.').pop().toLowerCase();
                
                if (!videoExtensions.includes(extension)) {
                    showError('Veuillez sélectionner une vidéo valide (MP4, AVI, MOV, MKV, WMV, WebM)');
                    return false;
                }
            }
            
            if (file.size > CONFIG.MAX_VIDEO_SIZE) {
                const maxGB = CONFIG.MAX_VIDEO_SIZE / (1024 * 1024 * 1024);
                showError(`La vidéo est trop volumineuse. Taille maximale: ${maxGB}GB`);
                return false;
            }
            
            return true;
        }

        // Validation des fichiers
        function validateFile(file) {
            // Accepter tous les types de fichiers pour la compression
            const maxSize = CONFIG.MAX_FILE_COMPRESSION_SIZE;
            
            if (file.size > maxSize) {
                const maxGB = maxSize / (1024 * 1024 * 1024);
                showError(`Le fichier "${file.name}" est trop volumineux. Taille maximale: ${maxGB}GB`);
                return false;
            }
            
            return true;
        }

        // Compression d'image
        async function compressImage() {
            if (!originalImage) return;
            
            try {
                // Désactiver le bouton et afficher le loader
                elements.compressImageBtn.disabled = true;
                document.getElementById('compressBtnText').classList.add('hidden');
                document.getElementById('compressingText').classList.remove('hidden');
                
                compressionStartTime = Date.now();
                
                const quality = document.getElementById('compressionQualitySlider').value / 100;
                const maxWidth = parseInt(document.getElementById('maxWidthSlider').value);
                
                // Utiliser Compressor.js
                new Compressor(originalImage, {
                    quality: quality,
                    maxWidth: maxWidth,
                    success: async (result) => {
                        compressedImage = result;
                        
                        const imageData = await readFileAsDataURL(result);
                        elements.compressedPreviewImg.src = imageData;
                        
                        // Masquer le placeholder et afficher l'image
                        document.getElementById('compressedPreviewPlaceholder').classList.add('hidden');
                        elements.compressedPreviewImg.classList.remove('hidden');
                        
                        // Afficher les informations
                        document.getElementById('compressedSize').textContent = formatFileSize(result.size);
                        document.getElementById('compressedSize').classList.remove('hidden');
                        
                        const originalSizeMB = originalImage.size / (1024 * 1024);
                        const compressedSizeMB = result.size / (1024 * 1024);
                        const savings = ((originalSizeMB - compressedSizeMB) / originalSizeMB * 100).toFixed(1);
                        
                        document.getElementById('compressionRatio').textContent = `${savings}% de réduction`;
                        document.getElementById('compressionRatio').classList.remove('hidden');
                        
                        // Afficher les résultats
                        showCompressionResults(originalImage.size, result.size);
                        
                        // Mettre à jour les statistiques
                        updateStats('images', originalSizeMB - compressedSizeMB);
                    },
                    error: (err) => {
                        showError('Erreur lors de la compression: ' + err.message);
                        resetCompressionUI();
                    }
                });
                
            } catch (error) {
                showError('Erreur lors de la compression: ' + error.message);
                resetCompressionUI();
            }
        }

        // Amélioration de qualité d'image
        async function improveImageQuality() {
            if (!qualityImage) return;
            
            try {
                // Désactiver le bouton et afficher le loader
                elements.improveQualityBtn.disabled = true;
                document.getElementById('improveBtnText').classList.add('hidden');
                document.getElementById('improvingText').classList.remove('hidden');
                
                // Afficher la barre de progression
                document.getElementById('qualityProgress').classList.remove('hidden');
                
                qualityStartTime = Date.now();
                
                // Simuler une amélioration de qualité
                const scaleFactor = document.querySelector('.scale-factor-btn.bg-purple-100')?.getAttribute('data-factor') || '2';
                const improvementType = document.querySelector('.quality-option.active')?.getAttribute('data-improvement') || 'upscale';
                
                // Simulation de progression
                await simulateProgress(
                    'qualityProgressBar',
                    'qualityProgressPercent',
                    async () => {
                        return await simulateQualityImprovement(scaleFactor, improvementType);
                    }
                );
                
            } catch (error) {
                showError('Erreur lors de l\'amélioration: ' + error.message);
                resetQualityUI();
            }
        }

        // Simulation d'amélioration de qualité
        async function simulateQualityImprovement(scaleFactor, improvementType) {
            return new Promise((resolve) => {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const img = new Image();
                    img.onload = function() {
                        const canvas = document.createElement('canvas');
                        let newWidth = img.naturalWidth;
                        let newHeight = img.naturalHeight;
                        
                        if (scaleFactor !== 'auto') {
                            newWidth = img.naturalWidth * parseInt(scaleFactor);
                            newHeight = img.naturalHeight * parseInt(scaleFactor);
                        } else {
                            newWidth = img.naturalWidth * 1.5;
                            newHeight = img.naturalHeight * 1.5;
                        }
                        
                        canvas.width = newWidth;
                        canvas.height = newHeight;
                        const ctx = canvas.getContext('2d');
                        
                        // Appliquer des filtres selon le type d'amélioration
                        if (improvementType === 'denoise') {
                            ctx.filter = 'blur(0.5px)';
                        } else if (improvementType === 'sharpen') {
                            ctx.filter = 'contrast(1.2) saturate(1.2)';
                        }
                        
                        ctx.drawImage(img, 0, 0, newWidth, newHeight);
                        ctx.filter = 'none';
                        
                        canvas.toBlob(async (blob) => {
                            improvedImage = blob;
                            
                            const imageData = await readFileAsDataURL(blob);
                            elements.qualityImprovedPreviewImg.src = imageData;
                            
                            // Masquer le placeholder et afficher l'image
                            document.getElementById('qualityImprovedPreviewPlaceholder').classList.add('hidden');
                            elements.qualityImprovedPreviewImg.classList.remove('hidden');
                            
                            // Afficher les informations
                            document.getElementById('qualityImprovedSize').textContent = formatFileSize(blob.size);
                            document.getElementById('qualityImprovedSize').classList.remove('hidden');
                            document.getElementById('qualityImprovedDimensions').textContent = `${newWidth} × ${newHeight}px`;
                            document.getElementById('qualityImprovedDimensions').classList.remove('hidden');
                            
                            // Afficher les résultats
                            showQualityImprovementResults(img, newWidth, newHeight, blob.size);
                            
                            resolve();
                        }, 'image/jpeg', 0.9);
                    };
                    img.src = e.target.result;
                };
                reader.readAsDataURL(qualityImage);
            });
        }

        // Suppression d'arrière-plan
        async function removeBackground() {
            if (!removeBgImage) return;
            
            try {
                // Désactiver le bouton et afficher le loader
                elements.removeBackgroundBtn.disabled = true;
                document.getElementById('removeBgBtnText').classList.add('hidden');
                document.getElementById('removingBgText').classList.remove('hidden');
                
                // Afficher la barre de progression
                document.getElementById('removeBgProgress').classList.remove('hidden');
                
                removeBgStartTime = Date.now();
                
                // Options de suppression
                const bgOption = document.querySelector('.bg-removal-option.active')?.getAttribute('data-bg-option') || 'auto';
                const edgeSmoothing = document.getElementById('edgeSmoothingOption').checked;
                
                // Simulation de progression
                await simulateProgress(
                    'removeBgProgressBar',
                    'removeBgProgressPercent',
                    async () => {
                        return await callRemoveBgAPI(bgOption, edgeSmoothing);
                    }
                );
                
            } catch (error) {
                showError('Erreur lors de la suppression: ' + error.message);
                resetRemoveBgUI();
            }
        }

        // Compression vidéo améliorée
        async function compressVideo() {
            if (!originalVideo) return;
            
            try {
                // Désactiver le bouton et afficher le loader
                elements.compressVideoBtn.disabled = true;
                document.getElementById('compressVideoBtnText').classList.add('hidden');
                document.getElementById('compressingVideoText').classList.remove('hidden');
                
                // Afficher la barre de progression
                elements.videoProgress.classList.remove('hidden');
                document.getElementById('compressionStatus').textContent = 'Analyse IA en cours...';
                
                videoStartTime = Date.now();
                
                // Options de compression
                const mode = document.querySelector('.optimized-video-option.active')?.getAttribute('data-mode') || 'intelligent';
                const quality = document.querySelector('.video-quality-option.active')?.getAttribute('data-quality') || 'high';
                const resolution = document.querySelector('.resolution-option.active')?.getAttribute('data-resolution') || 'adaptive';
                const compressionRate = document.getElementById('compressionRateSlider').value / 100;
                const format = document.querySelector('.video-option.active')?.getAttribute('data-format') || 'mp4';
                const optimizeAudio = document.getElementById('audioOptimizationOption').checked;
                const adaptiveFPS = document.getElementById('fpsAdaptiveOption').checked;
                const noiseReduction = document.getElementById('noiseReductionOption').checked;
                const brightnessCorrection = document.getElementById('brightnessCorrectionOption').checked;
                
                // Simuler la compression avec IA
                await simulateVideoCompressionIA(
                    mode, 
                    quality, 
                    resolution, 
                    compressionRate, 
                    format, 
                    optimizeAudio, 
                    adaptiveFPS,
                    noiseReduction,
                    brightnessCorrection
                );
                
            } catch (error) {
                showError('Erreur lors de la compression vidéo: ' + error.message);
                resetVideoUI();
            }
        }

        // Simulation de compression vidéo IA améliorée
        async function simulateVideoCompressionIA(
            mode, 
            quality, 
            resolution, 
            compressionRate, 
            format, 
            optimizeAudio, 
            adaptiveFPS,
            noiseReduction,
            brightnessCorrection
        ) {
            return new Promise((resolve) => {
                // Simuler une compression en réduisant la taille du fichier
                const originalSize = originalVideo.size;
                let compressedSize;
                
                // Ajuster la réduction selon le mode et la qualité
                let baseCompression;
                
                switch(mode) {
                    case 'intelligent':
                        // Mode intelligent : analyse et optimise
                        baseCompression = 0.5; // 50% par défaut
                        if (quality === 'low') baseCompression = 0.1;
                        else if (quality === 'medium') baseCompression = 0.3;
                        else if (quality === 'high') baseCompression = 0.5;
                        else if (quality === 'very-high') baseCompression = 0.7;
                        
                        // Ajuster selon la résolution
                        if (resolution !== 'original' && resolution !== 'adaptive') {
                            if (resolution === '480') baseCompression *= 0.5;
                            else if (resolution === '720') baseCompression *= 0.7;
                            else if (resolution === '1080') baseCompression *= 0.9;
                        }
                        
                        // Ajuster selon les options
                        if (optimizeAudio) baseCompression *= 0.9;
                        if (noiseReduction) baseCompression *= 0.95;
                        if (brightnessCorrection) baseCompression *= 0.98;
                        
                        compressedSize = Math.round(originalSize * baseCompression);
                        break;
                        
                    case 'balanced':
                        // Mode équilibré : compromis qualité/taille
                        switch(quality) {
                            case 'low':
                                compressedSize = Math.round(originalSize * 0.15);
                                break;
                            case 'medium':
                                compressedSize = Math.round(originalSize * 0.35);
                                break;
                            case 'high':
                                compressedSize = Math.round(originalSize * 0.55);
                                break;
                            case 'very-high':
                                compressedSize = Math.round(originalSize * 0.75);
                                break;
                            default:
                                compressedSize = Math.round(originalSize * 0.55);
                        }
                        break;
                        
                    case 'extreme':
                        // Mode extrême : taille minimale
                        compressedSize = Math.round(originalSize * (1 - compressionRate));
                        break;
                        
                    default:
                        compressedSize = Math.round(originalSize * 0.5);
                }
                
                // Ajuster pour la résolution adaptative
                if (resolution === 'adaptive') {
                    const videoElement = elements.originalVideoPreview;
                    if (videoElement.videoWidth > 1920 || videoElement.videoHeight > 1080) {
                        compressedSize = Math.round(compressedSize * 0.6); // Réduction supplémentaire pour haute résolution
                    }
                }
                
                compressedVideo = new Blob([new Uint8Array(compressedSize)], { 
                    type: `video/${format === 'mp4' ? 'mp4' : format === 'webm' ? 'webm' : format === 'hevc' ? 'mp4' : 'avi'}`
                });
                
                // Simuler la progression
                simulateVideoProgress().then(() => {
                    // Mettre à jour l'aperçu
                    const videoData = URL.createObjectURL(originalVideo);
                    elements.compressedVideoPreview.src = videoData;
                    
                    // Masquer le placeholder et afficher la vidéo
                    document.getElementById('compressedVideoPlaceholder').classList.add('hidden');
                    elements.compressedVideoPreview.classList.remove('hidden');
                    
                    // Afficher les informations
                    document.getElementById('compressedVideoSize').textContent = formatFileSize(compressedSize);
                    document.getElementById('compressedVideoSize').classList.remove('hidden');
                    
                    const originalSizeMB = originalSize / (1024 * 1024);
                    const compressedSizeMB = compressedSize / (1024 * 1024);
                    const savings = ((originalSizeMB - compressedSizeMB) / originalSizeMB * 100).toFixed(1);
                    
                    document.getElementById('compressionVideoRatio').textContent = `${savings}% de réduction`;
                    document.getElementById('compressionVideoRatio').classList.remove('hidden');
                    
                    // Calculer la qualité préservée (estimation)
                    const qualityPreserved = 100 - (savings * 0.7); // Estimation
                    
                    // Afficher les résultats
                    showVideoCompressionResults(
                        originalSize, 
                        compressedSize, 
                        resolution, 
                        format, 
                        qualityPreserved,
                        mode
                    );
                    
                    // Mettre à jour les statistiques
                    updateStats('videos', originalSizeMB - compressedSizeMB);
                    
                    resolve();
                });
            });
        }

        // Simulation de progression vidéo
        async function simulateVideoProgress() {
            return new Promise((resolve) => {
                let progress = 0;
                const interval = setInterval(() => {
                    progress += Math.random() * 10 + 5;
                    if (progress >= 100) {
                        progress = 100;
                        clearInterval(interval);
                        resolve();
                    }
                    
                    updateVideoProgress(progress);
                    
                    // Mettre à jour les informations de progression
                    if (progress < 30) {
                        document.getElementById('compressionStatus').textContent = 'Analyse du contenu vidéo...';
                    } else if (progress < 60) {
                        document.getElementById('compressionStatus').textContent = 'Optimisation des paramètres IA...';
                    } else if (progress < 90) {
                        document.getElementById('compressionStatus').textContent = 'Compression en cours...';
                    } else {
                        document.getElementById('compressionStatus').textContent = 'Finalisation...';
                    }
                    
                    // Simuler l'utilisation CPU et mémoire
                    if (progress % 20 === 0) {
                        const cpu = Math.round(30 + Math.random() * 40);
                        const memory = Math.round(200 + Math.random() * 200);
                        document.getElementById('cpuUsage').textContent = `CPU: ${cpu}%`;
                        document.getElementById('memoryUsage').textContent = `Mémoire: ${memory}MB`;
                        document.getElementById('progressInfo').classList.remove('hidden');
                    }
                }, 200);
            });
        }

        // Mettre à jour la progression vidéo
        function updateVideoProgress(percent) {
            document.getElementById('videoProgressBar').style.width = percent + '%';
            document.getElementById('videoProgressPercent').textContent = Math.round(percent) + '%';
        }

        // Compression de fichiers
        async function compressFiles() {
            if (selectedFiles.length === 0) return;
            
            try {
                // Désactiver le bouton et afficher le loader
                elements.compressFileBtn.disabled = true;
                document.getElementById('compressFileBtnText').classList.add('hidden');
                document.getElementById('compressingFileText').classList.remove('hidden');
                
                // Afficher la barre de progression
                elements.fileProgress.classList.remove('hidden');
                document.getElementById('fileProgressDetails').classList.remove('hidden');
                
                fileStartTime = Date.now();
                
                // Options de compression
                const archiveType = document.querySelector('.archive-option.active')?.getAttribute('data-archive') || 'zip';
                const compressionLevel = parseInt(document.getElementById('fileCompressionLevelSlider').value);
                const encrypt = document.getElementById('encryptArchiveOption').checked;
                const password = encrypt ? document.getElementById('archivePassword').value : null;
                const recursive = document.getElementById('recursiveCompressionOption').checked;
                const option = document.querySelector('.file-option.active')?.getAttribute('data-option') || 'single-archive';
                
                // Simuler la compression
                await simulateFileCompression(
                    archiveType, 
                    compressionLevel, 
                    encrypt, 
                    password, 
                    recursive, 
                    option
                );
                
            } catch (error) {
                showError('Erreur lors de la compression des fichiers: ' + error.message);
                resetFileUI();
            }
        }

        // Simulation de compression de fichiers
        async function simulateFileCompression(
            archiveType, 
            compressionLevel, 
            encrypt, 
            password, 
            recursive, 
            option
        ) {
            return new Promise((resolve) => {
                // Calculer la taille totale
                const totalSize = selectedFiles.reduce((total, file) => total + file.size, 0);
                
                // Déterminer le taux de compression basé sur le niveau
                let compressionRatio;
                if (compressionLevel <= 3) compressionRatio = 0.8; // 20% de réduction
                else if (compressionLevel <= 6) compressionRatio = 0.6; // 40% de réduction
                else compressionRatio = 0.4; // 60% de réduction
                
                // Ajuster selon le type d'archive
                if (archiveType === '7z') compressionRatio *= 0.9; // 10% de compression supplémentaire
                else if (archiveType === 'rar') compressionRatio *= 0.95; // 5% de compression supplémentaire
                
                const compressedSize = Math.round(totalSize * compressionRatio);
                
                // Simuler la progression
                simulateFileProgress().then(() => {
                    // Créer un blob simulé pour l'archive
                    compressedArchive = new Blob([new Uint8Array(compressedSize)], { 
                        type: `application/${archiveType === 'zip' ? 'zip' : archiveType === '7z' ? 'x-7z-compressed' : 'x-rar-compressed'}`
                    });
                    
                    // Afficher les résultats
                    showFileCompressionResults(
                        totalSize, 
                        compressedSize, 
                        archiveType, 
                        compressionLevel, 
                        encrypt,
                        option
                    );
                    
                    // Mettre à jour les statistiques
                    const originalSizeMB = totalSize / (1024 * 1024);
                    const compressedSizeMB = compressedSize / (1024 * 1024);
                    updateStats('files', originalSizeMB - compressedSizeMB);
                    
                    resolve();
                });
            });
        }

        // Simulation de progression de fichiers
        async function simulateFileProgress() {
            return new Promise((resolve) => {
                let progress = 0;
                let fileIndex = 0;
                const totalFiles = selectedFiles.length;
                
                const interval = setInterval(() => {
                    // Progression globale
                    progress += Math.random() * 10 + 5;
                    if (progress >= 100) {
                        progress = 100;
                        clearInterval(interval);
                        resolve();
                    }
                    
                    document.getElementById('fileProgressBar').style.width = progress + '%';
                    document.getElementById('fileProgressPercent').textContent = Math.round(progress) + '%';
                    
                    // Progression par fichier
                    if (progress % (100 / totalFiles) < 10 && fileIndex < totalFiles) {
                        fileIndex++;
                        const fileName = selectedFiles[fileIndex - 1].name;
                        if (fileName.length > 20) {
                            fileName = fileName.substring(0, 17) + '...';
                        }
                        
                        document.getElementById('currentFileName').textContent = `Fichier : ${fileName}`;
                        document.getElementById('fileProgressText').textContent = `${fileIndex}/${totalFiles}`;
                        
                        const fileProgress = (fileIndex / totalFiles) * 100;
                        document.getElementById('fileDetailProgressBar').style.width = fileProgress + '%';
                    }
                    
                    // Mettre à jour le statut
                    if (progress < 30) {
                        document.getElementById('fileCompressionStatus').textContent = 'Analyse des fichiers...';
                    } else if (progress < 60) {
                        document.getElementById('fileCompressionStatus').textContent = 'Compression en cours...';
                    } else if (progress < 90) {
                        document.getElementById('fileCompressionStatus').textContent = 'Création de l\'archive...';
                    } else {
                        document.getElementById('fileCompressionStatus').textContent = 'Finalisation...';
                    }
                }, 200);
            });
        }

        // Appel à l'API remove.bg
        async function callRemoveBgAPI(bgOption, edgeSmoothing) {
            try {
                const formData = new FormData();
                formData.append('image_file', removeBgImage);
                formData.append('size', 'auto');
                
                // Ajouter les options
                if (bgOption !== 'auto') {
                    formData.append('type', bgOption);
                }
                
                if (edgeSmoothing) {
                    formData.append('crop', 'true');
                }
                
                const response = await fetch(CONFIG.REMOVE_BG_API_URL, {
                    method: 'POST',
                    headers: {
                        'X-Api-Key': CONFIG.REMOVE_BG_API_KEY,
                    },
                    body: formData
                });
                
                if (!response.ok) {
                    throw new Error(`Erreur API: ${response.status}`);
                }
                
                const blob = await response.blob();
                removedBgImage = blob;
                
                const imageData = await readFileAsDataURL(blob);
                elements.removeBgResultPreviewImg.src = imageData;
                
                // Masquer le placeholder et afficher l'image
                document.getElementById('removeBgResultPlaceholder').classList.add('hidden');
                elements.removeBgResultPreviewImg.classList.remove('hidden');
                
                // Afficher les informations
                document.getElementById('removeBgResultSize').textContent = formatFileSize(blob.size);
                document.getElementById('removeBgResultSize').classList.remove('hidden');
                
                // Afficher les résultats
                showRemoveBgResults(blob.size);
                
            } catch (error) {
                // Fallback: simulation locale si l'API échoue
                console.log('API remove.bg échouée, utilisation du mode local');
                await simulateBackgroundRemoval();
            }
        }

        // Simulation locale de suppression d'arrière-plan
        async function simulateBackgroundRemoval() {
            return new Promise((resolve) => {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const img = new Image();
                    img.onload = function() {
                        const canvas = document.createElement('canvas');
                        canvas.width = img.naturalWidth;
                        canvas.height = img.naturalHeight;
                        const ctx = canvas.getContext('2d');
                        
                        // Dessiner l'image originale
                        ctx.drawImage(img, 0, 0);
                        
                        // Simulation basique de suppression d'arrière-plan
                        const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
                        const data = imageData.data;
                        
                        // Simple détection de fond (basé sur la couleur)
                        for (let i = 0; i < data.length; i += 4) {
                            const r = data[i];
                            const g = data[i + 1];
                            const b = data[i + 2];
                            
                            // Détection simple des pixels de fond (ex: blanc ou couleur claire)
                            if (r > 200 && g > 200 && b > 200) {
                                data[i + 3] = 0; // Transparent
                            }
                        }
                        
                        ctx.putImageData(imageData, 0, 0);
                        
                        canvas.toBlob(async (blob) => {
                            removedBgImage = blob;
                            
                            const imageData = await readFileAsDataURL(blob);
                            elements.removeBgResultPreviewImg.src = imageData;
                            
                            // Masquer le placeholder et afficher l'image
                            document.getElementById('removeBgResultPlaceholder').classList.add('hidden');
                            elements.removeBgResultPreviewImg.classList.remove('hidden');
                            
                            // Afficher les informations
                            document.getElementById('removeBgResultSize').textContent = formatFileSize(blob.size);
                            document.getElementById('removeBgResultSize').classList.remove('hidden');
                            
                            // Afficher les résultats
                            showRemoveBgResults(blob.size);
                            
                            resolve();
                        }, 'image/png');
                    };
                    img.src = e.target.result;
                };
                reader.readAsDataURL(removeBgImage);
            });
        }

        // Simulation de progression
        async function simulateProgress(progressBarId, progressPercentId, task) {
            return new Promise((resolve) => {
                let progress = 0;
                const interval = setInterval(() => {
                    progress += Math.random() * 20;
                    if (progress >= 100) {
                        progress = 100;
                        clearInterval(interval);
                        
                        // Exécuter la tâche
                        task().then(() => {
                            resolve();
                        });
                    }
                    
                    document.getElementById(progressBarId).style.width = progress + '%';
                    document.getElementById(progressPercentId).textContent = Math.round(progress) + '%';
                }, 200);
            });
        }

        // Affichage des résultats de compression
        function showCompressionResults(originalSizeBytes, compressedSizeBytes) {
            const compressionTimeMs = Date.now() - compressionStartTime;
            const originalSizeMB = originalSizeBytes / (1024 * 1024);
            const compressedSizeMB = compressedSizeBytes / (1024 * 1024);
            const savings = ((originalSizeMB - compressedSizeMB) / originalSizeMB * 100).toFixed(1);
            
            // Mettre à jour les statistiques
            document.getElementById('finalOriginalSize').textContent = originalSizeMB.toFixed(2) + ' MB';
            document.getElementById('finalCompressedSize').textContent = compressedSizeMB.toFixed(2) + ' MB';
            document.getElementById('compressionSavings').textContent = savings + '%';
            document.getElementById('compressionTime').textContent = (compressionTimeMs / 1000).toFixed(2);
            
            // Réactiver le bouton
            elements.compressImageBtn.disabled = false;
            document.getElementById('compressBtnText').classList.remove('hidden');
            document.getElementById('compressingText').classList.add('hidden');
            
            // Afficher les résultats
            elements.compressionResults.classList.remove('hidden');
            
            // Scroll vers les résultats
            elements.compressionResults.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Affichage des résultats d'amélioration qualité
        function showQualityImprovementResults(originalImg, newWidth, newHeight, improvedSizeBytes) {
            const qualityTimeMs = Date.now() - qualityStartTime;
            const originalSizeMB = qualityImage.size / (1024 * 1024);
            const improvedSizeMB = improvedSizeBytes / (1024 * 1024);
            const scaleFactorX = (newWidth / originalImg.naturalWidth).toFixed(1);
            
            // Mettre à jour les images finales
            document.getElementById('finalOriginalQualityImg').src = elements.qualityOriginalPreviewImg.src;
            document.getElementById('finalImprovedQualityImg').src = elements.qualityImprovedPreviewImg.src;
            
            // Mettre à jour les statistiques
            document.getElementById('finalOriginalQualitySize').textContent = formatFileSize(qualityImage.size);
            document.getElementById('finalImprovedQualitySize').textContent = formatFileSize(improvedSizeBytes);
            document.getElementById('finalOriginalResolution').textContent = `${originalImg.naturalWidth} × ${originalImg.naturalHeight}px`;
            document.getElementById('finalImprovedResolution').textContent = `${newWidth} × ${newHeight}px`;
            document.getElementById('improvementFactor').textContent = `${scaleFactorX}x`;
            document.getElementById('qualityImprovementTime').textContent = (qualityTimeMs / 1000).toFixed(2);
            
            // Réactiver le bouton
            elements.improveQualityBtn.disabled = false;
            document.getElementById('improveBtnText').classList.remove('hidden');
            document.getElementById('improvingText').classList.add('hidden');
            document.getElementById('qualityProgress').classList.add('hidden');
            
            // Afficher les résultats
            elements.qualityResults.classList.remove('hidden');
            
            // Scroll vers les résultats
            elements.qualityResults.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Affichage des résultats de suppression d'arrière-plan
        function showRemoveBgResults(resultSizeBytes) {
            const removeBgTimeMs = Date.now() - removeBgStartTime;
            
            // Mettre à jour les images finales
            document.getElementById('finalOriginalBgImg').src = elements.removeBgOriginalPreviewImg.src;
            document.getElementById('finalRemovedBgImg').src = elements.removeBgResultPreviewImg.src;
            
            // Mettre à jour les statistiques
            document.getElementById('finalOriginalBgSize').textContent = formatFileSize(removeBgImage.size);
            document.getElementById('finalRemovedBgSize').textContent = formatFileSize(resultSizeBytes);
            document.getElementById('removeBgTime').textContent = (removeBgTimeMs / 1000).toFixed(2);
            
            // Réactiver le bouton
            elements.removeBackgroundBtn.disabled = false;
            document.getElementById('removeBgBtnText').classList.remove('hidden');
            document.getElementById('removingBgText').classList.add('hidden');
            document.getElementById('removeBgProgress').classList.add('hidden');
            
            // Afficher les résultats
            elements.removeBgResults.classList.remove('hidden');
            
            // Scroll vers les résultats
            elements.removeBgResults.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Affichage des résultats de compression vidéo améliorés
        function showVideoCompressionResults(originalSizeBytes, compressedSizeBytes, resolution, format, qualityPreserved, mode) {
            const compressionTimeMs = Date.now() - videoStartTime;
            const originalSizeMB = originalSizeBytes / (1024 * 1024);
            const compressedSizeMB = compressedSizeBytes / (1024 * 1024);
            const savings = ((originalSizeMB - compressedSizeMB) / originalSizeMB * 100).toFixed(1);
            
            // Mettre à jour les vidéos finales
            const originalVideoData = elements.originalVideoPreview.src;
            document.getElementById('finalOriginalVideo').src = originalVideoData;
            document.getElementById('finalCompressedVideo').src = elements.compressedVideoPreview.src;
            
            // Mettre à jour les statistiques
            document.getElementById('finalOriginalVideoSizeStat').textContent = originalSizeMB.toFixed(2) + ' MB';
            document.getElementById('finalCompressedVideoSizeStat').textContent = compressedSizeMB.toFixed(2) + ' MB';
            document.getElementById('videoCompressionSavings').textContent = savings + '%';
            document.getElementById('qualityPreserved').textContent = qualityPreserved.toFixed(0) + '%';
            document.getElementById('compressionVideoTime').textContent = (compressionTimeMs / 1000).toFixed(2);
            document.getElementById('finalOriginalVideoSize').textContent = formatFileSize(originalSizeBytes);
            document.getElementById('finalCompressedVideoSize').textContent = formatFileSize(compressedSizeBytes);
            
            // Informations vidéo
            const videoElement = elements.originalVideoPreview;
            const duration = videoElement.duration || 60;
            const hours = Math.floor(duration / 3600);
            const minutes = Math.floor((duration % 3600) / 60);
            const seconds = Math.floor(duration % 60);
            
            let durationText = '';
            if (hours > 0) durationText += `${hours}h `;
            if (minutes > 0) durationText += `${minutes}m `;
            durationText += `${seconds}s`;
            
            document.getElementById('videoDuration').textContent = durationText;
            document.getElementById('originalVideoResolution').textContent = 
                `${Math.round(videoElement.videoWidth)}×${Math.round(videoElement.videoHeight)}`;
            document.getElementById('compressedVideoResolution').textContent = 
                resolution === 'original' ? 'Originale' : 
                resolution === 'adaptive' ? 'Adaptative' : `${resolution}p`;
            document.getElementById('aiModeUsed').textContent = 
                mode === 'intelligent' ? 'Intelligent (IA)' :
                mode === 'balanced' ? 'Équilibré' : 'Extrême';
            document.getElementById('videoFormat').textContent = format.toUpperCase();
            document.getElementById('videoCodecResult').textContent = format === 'hevc' ? 'HEVC (H.265)' : 'H.264';
            document.getElementById('compressionApplied').textContent = savings + '%';
            
            // Réactiver le bouton
            elements.compressVideoBtn.disabled = false;
            document.getElementById('compressVideoBtnText').classList.remove('hidden');
            document.getElementById('compressingVideoText').classList.add('hidden');
            elements.videoProgress.classList.add('hidden');
            document.getElementById('progressInfo').classList.add('hidden');
            
            // Afficher un message de succès
            showSuccess(`Vidéo compressée avec succès ! Économie de ${savings}% avec ${qualityPreserved.toFixed(0)}% de qualité préservée.`);
            
            // Afficher les résultats
            elements.videoResults.classList.remove('hidden');
            
            // Scroll vers les résultats
            elements.videoResults.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Affichage des résultats de compression de fichiers
        function showFileCompressionResults(
            originalSizeBytes, 
            compressedSizeBytes, 
            archiveType, 
            compressionLevel, 
            encrypt,
            option
        ) {
            const compressionTimeMs = Date.now() - fileStartTime;
            const originalSizeMB = originalSizeBytes / (1024 * 1024);
            const compressedSizeMB = compressedSizeBytes / (1024 * 1024);
            const savings = ((originalSizeMB - compressedSizeMB) / originalSizeMB * 100).toFixed(1);
            
            // Mettre à jour les statistiques
            document.getElementById('finalOriginalFileSizeStat').textContent = originalSizeMB.toFixed(2) + ' MB';
            document.getElementById('finalCompressedFileSizeStat').textContent = compressedSizeMB.toFixed(2) + ' MB';
            document.getElementById('fileCompressionSavings').textContent = savings + '%';
            document.getElementById('fileCompressionTime').textContent = (compressionTimeMs / 1000).toFixed(2);
            
            // Informations de l'archive
            document.getElementById('finalOriginalFileCount').textContent = selectedFiles.length + ' fichier(s)';
            document.getElementById('finalOriginalFileSize').textContent = formatFileSize(originalSizeBytes);
            document.getElementById('finalCompressedFileCount').textContent = '1 archive';
            document.getElementById('finalCompressedFileSize').textContent = formatFileSize(compressedSizeBytes);
            
            document.getElementById('archiveFormat').textContent = archiveType.toUpperCase();
            document.getElementById('archiveCompressionLevel').textContent = 
                compressionLevel <= 3 ? 'Faible' : 
                compressionLevel <= 6 ? 'Normal' : 'Élevé';
            document.getElementById('archiveFileCount').textContent = selectedFiles.length;
            document.getElementById('archiveEncryption').textContent = encrypt ? 'Oui' : 'Non';
            
            // Réactiver le bouton
            elements.compressFileBtn.disabled = false;
            document.getElementById('compressFileBtnText').classList.remove('hidden');
            document.getElementById('compressingFileText').classList.add('hidden');
            elements.fileProgress.classList.add('hidden');
            document.getElementById('fileProgressDetails').classList.add('hidden');
            
            // Afficher un message de succès
            showSuccess(`Archive créée avec succès ! ${savings}% d'économie.`);
            
            // Afficher les résultats
            elements.fileResults.classList.remove('hidden');
            
            // Scroll vers les résultats
            elements.fileResults.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Téléchargement des fichiers
        function downloadCompressedImage() {
            if (!compressedImage) return;
            downloadFile(compressedImage, 'image_compresse_', 'jpg');
        }

        function downloadImprovedImage() {
            if (!improvedImage) return;
            downloadFile(improvedImage, 'image_amelioree_', 'jpg');
        }

        function downloadRemovedBgImage() {
            if (!removedBgImage) return;
            downloadFile(removedBgImage, 'image_sans_fond_', 'png');
        }

        function downloadCompressedVideo() {
            if (!compressedVideo) return;
            const format = document.querySelector('.video-option.active')?.getAttribute('data-format') || 'mp4';
            downloadFile(compressedVideo, 'video_compresse_', format);
        }

        function downloadCompressedFile() {
            if (!compressedArchive) return;
            const archiveType = document.querySelector('.archive-option.active')?.getAttribute('data-archive') || 'zip';
            downloadFile(compressedArchive, 'archive_compressee_', archiveType);
        }

        function downloadFile(blob, prefix, extension) {
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = prefix + Date.now() + '.' + extension;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        // Réinitialisation
        function resetCompression() {
            originalImage = null;
            compressedImage = null;
            elements.compressionPreview.classList.add('hidden');
            elements.compressionResults.classList.add('hidden');
            elements.compressImageBtn.disabled = true;
            elements.compressionImageInput.value = '';
            resetCompressionUI();
        }

        function resetQualityImprovement() {
            qualityImage = null;
            improvedImage = null;
            elements.qualityPreview.classList.add('hidden');
            elements.qualityResults.classList.add('hidden');
            elements.improveQualityBtn.disabled = true;
            elements.qualityImageInput.value = '';
            resetQualityUI();
        }

        function resetRemoveBg() {
            removeBgImage = null;
            removedBgImage = null;
            elements.removeBgPreview.classList.add('hidden');
            elements.removeBgResults.classList.add('hidden');
            elements.removeBackgroundBtn.disabled = true;
            elements.removeBgImageInput.value = '';
            resetRemoveBgUI();
        }

        function resetVideoCompression() {
            originalVideo = null;
            compressedVideo = null;
            elements.videoPreview.classList.add('hidden');
            elements.videoInfoContainer.classList.add('hidden');
            elements.videoResults.classList.add('hidden');
            elements.compressVideoBtn.disabled = true;
            elements.videoInput.value = '';
            elements.largeFileWarning.classList.add('hidden');
            elements.compressionEstimation.classList.add('hidden');
            resetVideoUI();
        }

        function resetFileCompression() {
            selectedFiles = [];
            compressedArchive = null;
            elements.fileList.classList.add('hidden');
            elements.filePreview.classList.add('hidden');
            elements.fileResults.classList.add('hidden');
            elements.fileCompressionEstimation.classList.add('hidden');
            elements.compressFileBtn.disabled = true;
            elements.fileInput.value = '';
            resetFileUI();
            
            // Réinitialiser le champ mot de passe
            document.getElementById('archivePassword').value = '';
            elements.passwordField.classList.add('hidden');
            document.getElementById('encryptArchiveOption').checked = false;
        }

        function resetCompressionUI() {
            elements.compressImageBtn.disabled = false;
            document.getElementById('compressBtnText').classList.remove('hidden');
            document.getElementById('compressingText').classList.add('hidden');
        }

        function resetQualityUI() {
            elements.improveQualityBtn.disabled = false;
            document.getElementById('improveBtnText').classList.remove('hidden');
            document.getElementById('improvingText').classList.add('hidden');
            document.getElementById('qualityProgress').classList.add('hidden');
        }

        function resetRemoveBgUI() {
            elements.removeBackgroundBtn.disabled = false;
            document.getElementById('removeBgBtnText').classList.remove('hidden');
            document.getElementById('removingBgText').classList.add('hidden');
            document.getElementById('removeBgProgress').classList.add('hidden');
        }

        function resetVideoUI() {
            elements.compressVideoBtn.disabled = false;
            document.getElementById('compressVideoBtnText').classList.remove('hidden');
            document.getElementById('compressingVideoText').classList.add('hidden');
            elements.videoProgress.classList.add('hidden');
            document.getElementById('chunkProgressContainer').classList.add('hidden');
            document.getElementById('progressInfo').classList.add('hidden');
        }

        function resetFileUI() {
            elements.compressFileBtn.disabled = false;
            document.getElementById('compressFileBtnText').classList.remove('hidden');
            document.getElementById('compressingFileText').classList.add('hidden');
            elements.fileProgress.classList.add('hidden');
            document.getElementById('fileProgressDetails').classList.add('hidden');
        }

        // Basculer l'affichage du mot de passe
        function togglePasswordField() {
            if (elements.encryptArchiveOption.checked) {
                elements.passwordField.classList.remove('hidden');
            } else {
                elements.passwordField.classList.add('hidden');
            }
        }

        // Basculer la visibilité du mot de passe
        function togglePasswordVisibility() {
            const passwordField = elements.archivePassword;
            const icon = elements.togglePassword.querySelector('i');
            
            if (passwordField.type === 'password') {
                passwordField.type = 'text';
                icon.classList.remove('fa-eye');
                icon.classList.add('fa-eye-slash');
            } else {
                passwordField.type = 'password';
                icon.classList.remove('fa-eye-slash');
                icon.classList.add('fa-eye');
            }
        }

        // Gestion des statistiques
        function loadStats() {
            const savedStats = localStorage.getItem(CONFIG.STATS_KEY);
            if (savedStats) {
                stats = JSON.parse(savedStats);
                updateStatsDisplay();
            }
        }

        function saveStats() {
            localStorage.setItem(CONFIG.STATS_KEY, JSON.stringify(stats));
            updateStatsDisplay();
        }

        function updateStats(type, savingsMB) {
            switch(type) {
                case 'images':
                    stats.imagesCompressed++;
                    break;
                case 'videos':
                    stats.videosCompressed++;
                    break;
                case 'files':
                    stats.filesCompressed++;
                    break;
            }
            
            stats.totalSavingsMB += savingsMB;
            saveStats();
        }

        function updateStatsDisplay() {
            elements.totalImagesCompressed.textContent = stats.imagesCompressed;
            elements.totalVideosCompressed.textContent = stats.videosCompressed;
            elements.totalFilesCompressed.textContent = stats.filesCompressed;
            elements.totalSavings.textContent = stats.totalSavingsMB.toFixed(2) + ' MB';
        }

        // Fonctions utilitaires
        async function readFileAsDataURL(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.onload = () => resolve(reader.result);
                reader.onerror = reject;
                reader.readAsDataURL(file);
            });
        }

        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }

        function showError(message) {
            showNotification(message, 'error');
        }

        function showWarning(message) {
            showNotification(message, 'warning');
        }

        function showSuccess(message) {
            showNotification(message, 'success');
        }

        function showNotification(message, type = 'info') {
            const colors = {
                error: 'bg-red-500',
                warning: 'bg-yellow-500',
                success: 'bg-green-500',
                info: 'bg-blue-500'
            };
            
            const icons = {
                error: 'fa-exclamation-circle',
                warning: 'fa-exclamation-triangle',
                success: 'fa-check-circle',
                info: 'fa-info-circle'
            };
            
            const notificationDiv = document.createElement('div');
            notificationDiv.className = `fixed top-4 right-4 ${colors[type]} text-white p-4 rounded-lg shadow-lg z-50 max-w-md transition-all duration-300`;
            notificationDiv.innerHTML = `
                <div class="flex items-center">
                    <i class="fas ${icons[type]} mr-3 text-lg"></i>
                    <div>
                        <p class="font-bold">${type === 'error' ? 'Erreur' : type === 'warning' ? 'Avertissement' : type === 'success' ? 'Succès' : 'Information'}</p>
                        <p class="text-sm">${message}</p>
                    </div>
                </div>
            `;
            
            document.body.appendChild(notificationDiv);
            
            setTimeout(() => {
                notificationDiv.style.opacity = '0';
                notificationDiv.style.transform = 'translateX(100%)';
                setTimeout(() => {
                    if (notificationDiv.parentNode) {
                        document.body.removeChild(notificationDiv);
                    }
                }, 300);
            }, 5000);
        }

        function openPreviewModal(imageSrc, title) {
            elements.modalPreviewContent.innerHTML = `
                <img src="${imageSrc}" alt="${title}" class="max-w-full max-h-[70vh] mx-auto rounded-lg">
                <p class="mt-4 text-gray-600">${title}</p>
            `;
            elements.previewModal.classList.remove('hidden');
        }

        function closePreviewModal() {
            elements.previewModal.classList.add('hidden');
        }

        function openShareModal(type) {
            let link = 'https://sarah-ai.com/compression';
            let message = 'Découvrez Sarah IA - Compression intelligente';
            
            if (type === 'vidéo') {
                message = 'J\'ai compressé une vidéo avec Sarah IA !';
            } else if (type === 'archive') {
                message = 'J\'ai créé une archive compressée avec Sarah IA !';
            }
            
            elements.shareLink.value = link;
            elements.shareModal.classList.remove('hidden');
        }

        function closeShareModal() {
            elements.shareModal.classList.add('hidden');
        }

        function copyShareLink() {
            elements.shareLink.select();
            elements.shareLink.setSelectionRange(0, 99999);
            document.execCommand('copy');
            
            // Afficher une confirmation
            const originalText = elements.copyShareLinkBtn.innerHTML;
            elements.copyShareLinkBtn.innerHTML = '<i class="fas fa-check"></i>';
            elements.copyShareLinkBtn.classList.remove('bg-blue-500');
            elements.copyShareLinkBtn.classList.add('bg-green-500');
            
            setTimeout(() => {
                elements.copyShareLinkBtn.innerHTML = originalText;
                elements.copyShareLinkBtn.classList.remove('bg-green-500');
                elements.copyShareLinkBtn.classList.add('bg-blue-500');
            }, 2000);
        }

        function toggleVoiceMode() {
            const isActive = elements.voiceBtn.classList.contains('bg-green-500');
            
            if (isActive) {
                elements.voiceBtn.classList.remove('bg-green-500');
                elements.voiceBtn.classList.add('bg-orange-500');
                showNotification('Mode vocal désactivé', 'info');
            } else {
                elements.voiceBtn.classList.remove('bg-orange-500');
                elements.voiceBtn.classList.add('bg-green-500');
                showNotification('Mode vocal activé - Fonctionnalité à venir', 'info');
            }
        }
    </script>
</body>
</html>